(function(){"use strict";var e={388:function(e,t,s){var a=s(963),r=s(252);const i={key:0},l={key:1},o={class:"banner"},n={key:2},d={class:"banner"};function c(e,t,s,a,c,u){const h=(0,r.up)("AdminNavBar"),p=(0,r.up)("router-view"),m=(0,r.up)("CustomerNavBar"),g=(0,r.up)("public-nav-bar");return e.$store.state.user&&e.$store.state.employeeRole?((0,r.wg)(),(0,r.iD)("div",i,[(0,r.Wm)(h),(0,r.Wm)(p)])):e.$store.state.user?((0,r.wg)(),(0,r.iD)("div",l,[(0,r._)("div",o,[(0,r.Wm)(m),(0,r.Wm)(p)])])):((0,r.wg)(),(0,r.iD)("div",n,[(0,r._)("div",d,[(0,r.Wm)(g),(0,r.Wm)(p)])]))}var u=s(907),h="data:image/png;base64,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";const p={class:"navbar navbar-expand-lg navbar-light bg-light"},m={class:"container-fluid"},g=(0,r._)("a",{class:"navbar-brand",href:"#"},[(0,r._)("img",{src:h,class:"d-inline-block align-center pl-3 img-fluid"}),(0,r.Uk)(" Duncan Hall Grille ")],-1),w=(0,r._)("button",{class:"navbar-toggler bg-light",style:{"vertical-align":"middle"},type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"},[(0,r._)("span",{class:"navbar-toggler-icon"})],-1),b={class:"collapse navbar-collapse",id:"navbarNav"},y={class:"navbar-nav"},f={class:"nav-item"},k=(0,r.Uk)("Finances"),_={class:"nav-item"},C=(0,r.Uk)("Inventory"),v={class:"nav-item"},S=(0,r.Uk)("Orders"),O={class:"nav-item"},D=(0,r.Uk)("Past Orders"),E={class:"nav-item"};function z(e,t){const s=(0,r.up)("router-link");return(0,r.wg)(),(0,r.iD)("nav",p,[(0,r._)("div",m,[g,w,(0,r._)("div",b,[(0,r._)("ul",y,[(0,r._)("li",f,[(0,r.Wm)(s,{class:"nav-link","active-class":"active",to:"/finances"},{default:(0,r.w5)((()=>[k])),_:1})]),(0,r._)("li",_,[(0,r.Wm)(s,{class:"nav-link","active-class":"active",to:"/inventory"},{default:(0,r.w5)((()=>[C])),_:1})]),(0,r._)("li",v,[(0,r.Wm)(s,{class:"nav-link","active-class":"active",to:"/orders"},{default:(0,r.w5)((()=>[S])),_:1})]),(0,r._)("li",O,[(0,r.Wm)(s,{class:"nav-link","active-class":"active",to:"/past-orders"},{default:(0,r.w5)((()=>[D])),_:1})]),(0,r._)("li",E,[e.$store.state.user?((0,r.wg)(),(0,r.iD)("a",{key:0,class:"nav-link",onClick:t[0]||(t[0]=t=>e.$store.dispatch("logout")),href:"#"},"Log Out")):(0,r.kq)("",!0)])])])])])}var R=s(744);const T={},I=(0,R.Z)(T,[["render",z]]);var $=I;const N={class:"navbar navbar-expand-lg navbar-light"},x={class:"container-fluid"},U=(0,r._)("a",{class:"navbar-brand",href:"#",style:{color:"#f8f8f8"}},[(0,r._)("img",{src:h,class:"d-inline-block align-center pl-3 img-fluid"}),(0,r.Uk)(" Duncan Hall Grille ")],-1),B={class:"navbar-toggler",style:{"vertical-align":"middle"},type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"},W={class:"collapse navbar-collapse",id:"navbarNav"},H={class:"navbar-nav"},M={class:"nav-item"},P=(0,r.Uk)("Home"),F={class:"nav-item"},q=(0,r.Uk)("Sign Up"),Z={class:"nav-item"},L=(0,r.Uk)("Login");function A(e,t){const s=(0,r.up)("fa"),a=(0,r.up)("router-link");return(0,r.wg)(),(0,r.iD)("nav",N,[(0,r._)("div",x,[U,(0,r._)("button",B,[(0,r.Wm)(s,{icon:"bars",style:{color:"white"}})]),(0,r._)("div",W,[(0,r._)("ul",H,[(0,r._)("li",M,[(0,r.Wm)(a,{class:"nav-link","active-class":"active",to:"/",style:{color:"#f8f8f8"}},{default:(0,r.w5)((()=>[P])),_:1})]),(0,r._)("li",F,[(0,r.Wm)(a,{class:"nav-link","active-class":"active",to:"/register",style:{color:"#f8f8f8"}},{default:(0,r.w5)((()=>[q])),_:1})]),(0,r._)("li",Z,[(0,r.Wm)(a,{class:"nav-link","active-class":"active",to:"/login",style:{color:"#f8f8f8"}},{default:(0,r.w5)((()=>[L])),_:1})])])])])])}const j={},V=(0,R.Z)(j,[["render",A]]);var K=V;const G={class:"navbar navbar-expand-lg navbar-light"},Y={class:"container-fluid"},Q=(0,r._)("a",{class:"navbar-brand",href:"#",style:{color:"#f8f8f8"}},[(0,r._)("img",{src:h,class:"d-inline-block align-center pl-3 img-fluid"}),(0,r.Uk)(" Duncan Hall Grille ")],-1),J={class:"navbar-toggler",style:{"vertical-align":"middle"},type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"},X={class:"collapse navbar-collapse",id:"navbarNav"},ee={class:"navbar-nav"},te={class:"nav-item"};function se(e,t){const s=(0,r.up)("fa");return(0,r.wg)(),(0,r.iD)("nav",G,[(0,r._)("div",Y,[Q,(0,r._)("button",J,[(0,r.Wm)(s,{icon:"bars",style:{color:"white"}})]),(0,r._)("div",X,[(0,r._)("ul",ee,[(0,r._)("li",te,[e.$store.state.user?((0,r.wg)(),(0,r.iD)("a",{key:0,class:"nav-link",onClick:t[0]||(t[0]=t=>e.$store.dispatch("logout")),href:"#",style:{color:"#f8f8f8"}},"Log Out")):(0,r.kq)("",!0)])])])])])}const ae={},re=(0,R.Z)(ae,[["render",se]]);var ie=re,le=s(321),oe=s(503),ne=s(68);const de={apiKey:"AIzaSyAEA0ooZgLHnpcneAjoSdXkNTME1r830kA",authDomain:"grilleproj.firebaseapp.com",projectId:"grilleproj",storageBucket:"grilleproj.appspot.com",messagingSenderId:"550140431780",appId:"1:550140431780:web:85f6ff617b989205330531",measurementId:"G-2Y07QJTS52"},ce=(0,oe.ZF)(de),ue=(0,ne.v0)(ce),he=(0,le.ad)(ce),pe=new Date,me=new Date;pe.getHours()?21!=pe.getHours()&&22!=pe.getHours()&&23!=pe.getHours()||pe.setMinutes(pe.getMinutes()-120):pe.setMinutes(pe.getMinutes()-60);pe.getDay();let ge=pe.getMonth()+1,we=pe.getDate();me.setDate(me.getDate()-me.getDay());let be=me.getMonth()+1,ye=me.getDate();const fe=ge+"-"+we+"-orders",ke="week-of-"+be+"-"+ye,_e=(0,le.hJ)(he,"orders",ke,fe);(0,le.hJ)(he,"finances",ke,"daily-totals");let Ce={view:(0,le.hJ)(he,"finances",ke,"daily-totals")};(0,le.hJ)(he,"finances");var ve={components:{AdminNavBar:$,PublicNavBar:K,CustomerNavBar:ie},async beforeMount(){const e=(0,u.oR)();await e.dispatch("getCustomerBase"),await e.dispatch("fetchUser"),await e.dispatch("getEmployees"),await e.dispatch("listener")}};const Se=(0,R.Z)(ve,[["render",c]]);var Oe=Se,De=s(119),Ee=s(577);const ze=e=>((0,r.dD)("data-v-074c5e16"),e=e(),(0,r.Cn)(),e),Re=ze((()=>(0,r._)("h3",null,"Duncan Grille Finances",-1))),Te={style:{"max-width":"40%","margin-left":"30%","margin-right":"30%","margin-bottom":"20px","text-align":"center"}},Ie=ze((()=>(0,r._)("label",{for:"weeks"},"Financial Info For:",-1))),$e=["value"],Ne=ze((()=>(0,r._)("hr",{style:{width:"80%",margin:"auto","margin-bottom":"10px"}},null,-1))),xe={style:{margin:"auto",height:"420px",width:"95%"}},Ue={class:"lCard"},Be={style:{color:"green","font-size":"22px"}},We={style:{"font-size":"12px"}},He={style:{width:"30%",float:"left","margin-left":"12.5%"}},Me={style:{"font-size":"15px",color:"green","text-align":"left","margin-bottom":"15px"}},Pe={style:{width:"30%",float:"right","margin-right":"12.5%"}},Fe={style:{"font-size":"15px",color:"green","text-align":"right","margin-bottom":"15px"}},qe=ze((()=>(0,r._)("div",null,[(0,r._)("canvas",{id:"myBarChart",width:"500",height:"200",style:{"margin-top":"5px"}})],-1))),Ze={class:"rCard"},Le={style:{color:"red","font-size":"22px"}},Ae={style:{"font-size":"12px"}},je={class:"table"},Ve=ze((()=>(0,r._)("thead",null,[(0,r._)("tr",null,[(0,r._)("th",{scope:"col"},"Date"),(0,r._)("th",{scope:"col"},"$"),(0,r._)("th",{scope:"col"},"Reason")])],-1))),Ke=ze((()=>(0,r._)("hr",{style:{width:"80%",margin:"auto"}},null,-1))),Ge={style:{margin:"auto","margin-bottom":"15px",height:"430px",width:"95%"}},Ye={class:"lCard"},Qe=ze((()=>(0,r._)("h2",null," Profit Distribution: ",-1))),Je={style:{"font-size":"14px"}},Xe={style:{"font-size":"14px",color:"red"}},et={style:{"font-size":"14px",color:"red"}},tt={style:{"font-size":"14px",color:"green"}},st={style:{"font-size":"14px",color:"orange"}},at=ze((()=>(0,r._)("hr",{style:{width:"80%",margin:"auto","margin-bottom":"40px"}},null,-1))),rt={style:{color:"green","font-size":"40px"}},it={class:"rCard"},lt=ze((()=>(0,r._)("h2",null,"Weekly Wages:",-1))),ot=ze((()=>(0,r._)("div",{id:"chart-wrapper"},[(0,r._)("canvas",{id:"myDoughnutChart",width:"500",height:"270",style:{"margin-top":"5px"}})],-1))),nt=ze((()=>(0,r._)("h2",null,"Hours Worked:",-1))),dt=ze((()=>(0,r._)("hr",{style:{width:"80%",margin:"auto"}},null,-1))),ct={style:{margin:"auto","margin-top":"50px",width:"90%"}},ut=ze((()=>(0,r._)("h2",{style:{"margin-top":"20px"}},"Schedule",-1))),ht={class:"table"},pt=ze((()=>(0,r._)("thead",null,[(0,r._)("tr",null,[(0,r._)("th",{scope:"col"},"Date"),(0,r._)("th",{scope:"col"},"1"),(0,r._)("th",{scope:"col"},"2"),(0,r._)("th",{scope:"col"},"3")])],-1))),mt=["onUpdate:modelValue"],gt=ze((()=>(0,r._)("hr",null,null,-1)));function wt(e,t,s,i,l,o){const n=(0,r.up)("AddEmployeeModal"),d=(0,r.up)("RemoveEmployeeModal");return(0,r.wg)(),(0,r.iD)(r.HY,null,[l.addEmployee?((0,r.wg)(),(0,r.j4)(n,{key:0,onClose:o.triggerAddEmployee},null,8,["onClose"])):(0,r.kq)("",!0),l.removeEmployee?((0,r.wg)(),(0,r.j4)(d,{key:1,onClose:o.triggerRemoveEmployee},null,8,["onClose"])):(0,r.kq)("",!0),Re,(0,r._)("div",Te,[Ie,(0,r.wy)((0,r._)("select",{name:"weeks",id:"weeks",onChange:t[0]||(t[0]=e=>o.updateFinances()),"onUpdate:modelValue":t[1]||(t[1]=e=>l.selectedWeek=e)},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(this.$store.state.weeks,(e=>((0,r.wg)(),(0,r.iD)("option",{value:e}," Week of "+(0,Ee.zw)(e[1].split(" ")[0]),9,$e)))),256))],544),[[a.bM,l.selectedWeek]])]),(0,r._)("div",null,[(0,r._)("h1",{style:{"font-weight":"bold"},class:(0,Ee.C_)({negative:this.$store.state.weeklyRev-this.$store.state.totalCost<0,positive:this.$store.state.weeklyRev-this.$store.state.totalCost>=0})}," Weekly Profit: "+(0,Ee.zw)(Number(this.$store.state.weeklyRev-this.$store.state.totalCost).toFixed(2)),3),(0,r._)("p",null,[(0,r._)("em",null,"Projected Profit: "+(0,Ee.zw)((this.$store.state.projections.r-this.$store.state.projections.c).toFixed(2)),1)])]),Ne,(0,r._)("div",xe,[(0,r._)("div",Ue,[(0,r._)("p",Be,"Weekly Revenue: $"+(0,Ee.zw)(Number(this.$store.state.weeklyRev).toFixed(2)),1),(0,r._)("p",We,"Projected Revenue: $"+(0,Ee.zw)(this.$store.state.projections.r.toFixed(2)),1),(0,r._)("div",He,[(0,r._)("p",Me,"Venmo Revenue: $"+(0,Ee.zw)(Number(this.$store.state.weeklyVenmoRev).toFixed(2)),1)]),(0,r._)("div",Pe,[(0,r._)("p",Fe,"Cash Revenue: $"+(0,Ee.zw)(Number(this.$store.state.weeklyCashRev).toFixed(2)),1)]),qe]),(0,r._)("div",Ze,[(0,r._)("p",Le,"Weekly Cost: $"+(0,Ee.zw)(Number(this.$store.state.totalCost).toFixed(2)),1),(0,r._)("p",Ae,"Projected Cost: $"+(0,Ee.zw)(this.$store.state.projections.c.toFixed(2)),1),(0,r._)("div",null,[(0,r._)("table",je,[Ve,(0,r._)("tbody",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(this.$store.state.weekCosts,(e=>((0,r.wg)(),(0,r.iD)("tr",null,[(0,r._)("td",null,(0,Ee.zw)(e[1].split(" ")[0]),1),(0,r._)("td",null,(0,Ee.zw)(Number(e[0]).toFixed(2)),1),(0,r._)("td",null,(0,Ee.zw)(e[2]),1)])))),256))])])])])]),Ke,(0,r._)("div",Ge,[(0,r._)("div",Ye,[Qe,(0,r._)("p",Je,"Weekly Profit: $"+(0,Ee.zw)(Number(this.$store.state.weeklyRev-this.$store.state.totalCost).toFixed(2)),1),(0,r._)("p",Xe,"10% Operations Cut: $"+(0,Ee.zw)(Number(.1*(this.$store.state.weeklyRev-this.$store.state.totalCost)).toFixed(2)),1),(0,r._)("p",et,"Weekly Online Fees: $"+(0,Ee.zw)(Number(this.$store.state.weeklyOnlineFee).toFixed(2)),1),(0,r._)("p",tt,"Employee Wage Pool: $"+(0,Ee.zw)(Number(.9*(this.$store.state.weeklyRev-this.$store.state.totalCost)).toFixed(2)),1),(0,r._)("p",st,"Hours Worked: "+(0,Ee.zw)(this.$store.state.totalHours.toFixed(2)),1),at,(0,r._)("p",rt," Hourly Wage: $"+(0,Ee.zw)(this.$store.state.wage.toFixed(2))+"/hour",1)]),(0,r._)("div",it,[lt,ot,nt,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(this.$store.state.hourLabels,(e=>((0,r.wg)(),(0,r.iD)("p",null,(0,Ee.zw)(e),1)))),256))])]),dt,(0,r._)("div",ct,[ut,(0,r._)("table",ht,[pt,(0,r._)("tbody",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.schedule,(e=>((0,r.wg)(),(0,r.iD)("tr",null,[(0,r._)("td",null,(0,Ee.zw)(e[0]),1),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.length-1,(t=>((0,r.wg)(),(0,r.iD)("td",null,[(0,r.wy)((0,r._)("input",{type:"text",name:"","onUpdate:modelValue":s=>e[t]=s,style:{"text-align":"center"}},null,8,mt),[[a.nr,e[t]]])])))),256))])))),256))])]),(0,r._)("button",{onClick:t[2]||(t[2]=e=>o.updateSchedule())}," Submit Schedule ")]),gt,(0,r._)("button",{onClick:t[3]||(t[3]=(...e)=>o.triggerAddEmployee&&o.triggerAddEmployee(...e)),style:{"margin-right":"10px"}},"Add Employee"),(0,r._)("button",{style:{"background-color":"red","margin-left":"10px"},onClick:t[4]||(t[4]=(...e)=>o.triggerRemoveEmployee&&o.triggerRemoveEmployee(...e))},"Remove Employee")],64)}function bt(e,t,s,a,r,i){return null}var yt=s(877),ft=s(278),kt={data(){return{totalRev:0,weeks:[],week:this.$store.state.selectedWeek,myBarChart:null,myDoughnutChart:null,storeDate:null,storeCost:null,storeRuns:[],storeReason:"",totalCost:0,workerHours:this.combineHours()}},async mounted(){this.barChart(this.$store.state.venmo,this.$store.state.cash,this.$store.state.days.flat()),this.doughnutChart(this.$store.state.employeeWages,this.$store.state.workingEmployees)},methods:{combineHours(){const e=[];for(let t=0;t<this.$store.state.workingEmployees.length;t++)e.push(this.$store.state.workingEmployees[t]+": "+this.$store.state.hours[t]);return e},async changeView(){this.$store.dispatch("changeWeek",this.week),Ce.view=(0,le.hJ)(he,"finances",this.week,"daily-totals"),this.myBarChart.destroy(),this.myDoughnutChart.destroy(),await this.$store.dispatch("getFinancialData"),await this.$store.dispatch("getStoreData"),await this.$store.dispatch("getSchedule"),await this.$store.dispatch("getHours"),this.barChart(this.$store.state.venmo,this.$store.state.cash,this.$store.state.days.flat()),this.doughnutChart(this.$store.state.employeeWages,this.$store.state.workingEmployees),this.workerHours=this.combineHours()},async addStoreRun(){const e=await(0,le.ET)((0,le.hJ)(he,"finances",this.$store.state.selectedWeek,"store-runs"),{date:this.storeDate,cost:this.storeCost,reason:this.storeReason});this.$store.dispatch("addStoreRun",{date:this.storeDate,cost:this.storeCost,reason:this.storeReason,id:e.id}),this.$store.dispatch("addCost",this.storeCost),this.storeDate=null,this.storeCost=0,this.storeReason="-"},async delStoreRun(e){await(0,le.oe)((0,le.JU)((0,le.hJ)(he,"finances",this.$store.state.selectedWeek,"store-runs"),e)),this.$store.dispatch("deleteStoreRun",e)},barChart(e,t,s){const a=document.getElementById("myBarChart").getContext("2d");this.myBarChart=new yt.Z(a,{type:"bar",data:{labels:s,datasets:[{label:"Venmo Total",data:e,backgroundColor:"#008CFF",borderWidth:1},{label:"Cash Total",data:t,backgroundColor:"#85bb65",borderWidth:1}]},options:{scales:{y:{beginAtZero:!0,grace:"10%",stacked:!0},x:{stacked:!0}},maintainAspectRatio:!1,plugins:{datalabels:{anchor:"end",align:"top",formatter:(e,t)=>{const s=[];function a(e,t){return e+t}t.chart.data.datasets.forEach((e=>{void 0!=e.data[t.dataIndex]&&s.push(e.data[t.dataIndex])}));let r=s.reduce(a,0);return t.datasetIndex==s.length-1?`$ ${Number(r).toFixed(2)} `:""}},tooltip:{callbacks:{label:function(e,t){return e.dataset.label+": $"+Number(e.formattedValue).toFixed(2)}}}}},plugins:[ft.Z]}),this.myBarChart},doughnutChart(e,t){const s=document.getElementById("myDoughnutChart").getContext("2d");this.myDoughnutChart=new yt.Z(s,{type:"doughnut",data:{labels:t,datasets:[{label:"Hours",data:e,backgroundColor:["red","orange","yellow","green","blue","indigo","violet","brown","black","white"],hoverOffset:4}]},options:{maintainAspectRatio:!1,plugins:{tooltip:{callbacks:{label:function(e,t){return e.label+": $"+Number(e.parsed).toFixed(2)}}}}}}),this.myDoughnutChart}}};const _t=(0,R.Z)(kt,[["render",bt]]);var Ct=_t;const vt=(0,r._)("h3",null,"Add Employee",-1),St=(0,r._)("hr",null,null,-1),Ot={key:0,class:"listContainer"},Dt={style:{"padding-left":"0px"}},Et=["onClick"],zt=(0,r._)("hr",null,null,-1),Rt=["disabled"];function Tt(e,t,s,i,l,o){return(0,r.wg)(),(0,r.iD)("div",{class:"new-backdrop",onClick:t[6]||(t[6]=(0,a.iM)(((...e)=>o.closeModal&&o.closeModal(...e)),["self"]))},[(0,r._)("div",{class:"new-modal",onClick:t[5]||(t[5]=(0,a.iM)((e=>l.modal=!1),["self"]))},[(0,r._)("button",{onClick:t[0]||(t[0]=(...e)=>o.closeModal&&o.closeModal(...e)),type:"button",style:{display:"inline",float:"right"},class:"btn-close pull-right","aria-label":"Close"}),vt,St,(0,r.wy)((0,r._)("input",{type:"text",class:"nameInput",id:"nameInput",placeholder:"Name (First and Last)","onUpdate:modelValue":t[1]||(t[1]=e=>l.name=e),autocomplete:"off",onInput:t[2]||(t[2]=(...e)=>o.filterCustomers&&o.filterCustomers(...e)),onFocus:t[3]||(t[3]=e=>l.modal=!0)},null,544),[[a.nr,l.name]]),l.filteredCustomers&&l.modal?((0,r.wg)(),(0,r.iD)("div",Ot,[(0,r._)("ul",Dt,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.filteredCustomers,(e=>((0,r.wg)(),(0,r.iD)("li",{class:"listItem",onClick:t=>o.setCustomer(e)},(0,Ee.zw)(e),9,Et)))),256))])])):(0,r.kq)("",!0),zt,(0,r._)("button",{disabled:!this.name,onClick:t[4]||(t[4]=(...e)=>o.makeEmployee&&o.makeEmployee(...e))},"Make Employee",8,Rt)])])}var It=s(196),$t={methods:{closeModal(){this.$emit("close")},filterCustomers(){let e=this.name;this.filteredCustomers=e?this.customers.map((e=>e[2])).filter((t=>t.toLowerCase().includes(e.toLowerCase()))):this.customers.map((e=>e[2]))},setCustomer(e){this.name=e,this.modal=!1},async makeEmployee(e){const t=this.customers.filter((e=>e[2]==this.name));if(0!=t.length){var s=`UPDATE customers set employee = 1 where id = ${t[0][0]}`;await It.ZP.post("https://duncan-grille-api.azurewebsites.net/api/place-order",{sql:s}),await(0,le.pl)((0,le.JU)(he,"auth",t[0][1]),{name:t[0][2],employee:!0}),alert(`${this.name} has been made an employee`),this.closeModal()}else alert("Cannot make employee")}},async mounted(){const e=await It.ZP.post("https://duncan-grille-api.azurewebsites.net/api/get-orders",{sql:"SELECT * from customers where employee != 1;"});this.customers=e.data,this.filterCustomers()},data(){return{customers:[],filteredCustomers:[],modal:!1,name:""}}};const Nt=(0,R.Z)($t,[["render",Tt]]);var xt=Nt;const Ut=(0,r._)("h3",null,"Remove Employee",-1),Bt=(0,r._)("hr",null,null,-1),Wt={key:0,class:"listContainer"},Ht={style:{"padding-left":"0px"}},Mt=["onClick"],Pt=(0,r._)("hr",null,null,-1),Ft=["disabled"];function qt(e,t,s,i,l,o){return(0,r.wg)(),(0,r.iD)("div",{class:"new-backdrop",onClick:t[6]||(t[6]=(0,a.iM)(((...e)=>o.closeModal&&o.closeModal(...e)),["self"]))},[(0,r._)("div",{class:"new-modal",onClick:t[5]||(t[5]=(0,a.iM)((e=>l.modal=!1),["self"]))},[(0,r._)("button",{onClick:t[0]||(t[0]=(...e)=>o.closeModal&&o.closeModal(...e)),type:"button",style:{display:"inline",float:"right"},class:"btn-close pull-right","aria-label":"Close"}),Ut,Bt,(0,r.wy)((0,r._)("input",{type:"text",class:"nameInput",id:"nameInput",placeholder:"Name (First and Last)","onUpdate:modelValue":t[1]||(t[1]=e=>l.name=e),autocomplete:"off",onInput:t[2]||(t[2]=(...e)=>o.filterCustomers&&o.filterCustomers(...e)),onFocus:t[3]||(t[3]=e=>l.modal=!0)},null,544),[[a.nr,l.name]]),l.filteredCustomers&&l.modal?((0,r.wg)(),(0,r.iD)("div",Wt,[(0,r._)("ul",Ht,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.filteredCustomers,(e=>((0,r.wg)(),(0,r.iD)("li",{class:"listItem",onClick:t=>o.setCustomer(e)},(0,Ee.zw)(e),9,Mt)))),256))])])):(0,r.kq)("",!0),Pt,(0,r._)("button",{disabled:!this.name,onClick:t[4]||(t[4]=(...e)=>o.makeEmployee&&o.makeEmployee(...e))},"Remove Employee",8,Ft)])])}var Zt={methods:{closeModal(){this.$emit("close")},filterCustomers(){let e=this.name;this.filteredCustomers=e?this.customers.map((e=>e[2])).filter((t=>t.toLowerCase().includes(e.toLowerCase()))):this.customers.map((e=>e[2]))},setCustomer(e){this.name=e,this.modal=!1},async makeEmployee(e){const t=this.customers.filter((e=>e[2]==this.name));if(0!=t.length){var s=`UPDATE customers set employee = 0 where id = ${t[0][0]}`;await It.ZP.post("https://duncan-grille-api.azurewebsites.net/api/place-order",{sql:s}),await(0,le.pl)((0,le.JU)(he,"auth",t[0][1]),{name:t[0][2],employee:!1}),alert(`${this.name} is no longer an employee`),this.closeModal()}else alert("Cannot remove employee")}},async mounted(){const e=await It.ZP.post("https://duncan-grille-api.azurewebsites.net/api/get-orders",{sql:"SELECT * from customers where employee = 1;"});this.customers=e.data,this.filterCustomers()},data(){return{customers:[],filteredCustomers:[],modal:!1,name:""}}};const Lt=(0,R.Z)(Zt,[["render",qt]]);var At=Lt,jt={components:{WeeklyFinances:Ct,AddEmployeeModal:xt,RemoveEmployeeModal:At},async mounted(){this.selectedWeek=this.$store.state.weeks.filter((e=>e[0]==this.$store.state.selWeek))[0],await this.$store.dispatch("updateFinancePage"),this.myBarChart&&this.myBarChart.destroy(),this.myDoughnutChart&&this.myDoughnutChart.destroy(),this.barChart(this.$store.state.weekVenmo,this.$store.state.weekCash,this.$store.state.weekLabels),this.doughnutChart(this.$store.state.workerHours,this.$store.state.workingEmployees),this.schedule=this.$store.state.weeklyEmployees,console.log(this.schedule)},methods:{onlyLettersAndNumbers(e){return e.replace(/[^a-z0-9A-Z ]+/gi," ")},triggerAddEmployee(){this.addEmployee=!this.addEmployee},triggerRemoveEmployee(){this.removeEmployee=!this.removeEmployee},async updateSchedule(){for(var e=0;e<this.schedule.length;e++)for(var t=1;t<4;t++)this.schedule[e][t]=this.onlyLettersAndNumbers(this.schedule[e][t]);var s="";for(e=0;e<this.schedule.length;e++)s=`UPDATE schedule set w1 = '${this.schedule[e][1]}', w2 = '${this.schedule[e][2]}', w3 = '${this.schedule[e][3]}' where week_id = ${this.selectedWeek[0]} and day_of_week = '${this.schedule[e][0]}';`,await It.ZP.post("https://duncan-grille-api.azurewebsites.net/api/place-order",{sql:s});alert("Schedule Successfully Submitted")},async updateFinances(){await this.$store.dispatch("selectWeek",Number(this.selectedWeek[0])),await this.$store.dispatch("updateFinancePage"),this.myBarChart&&this.myBarChart.destroy(),this.myDoughnutChart&&this.myDoughnutChart.destroy(),this.barChart(this.$store.state.weekVenmo,this.$store.state.weekCash,this.$store.state.weekLabels),this.doughnutChart(this.$store.state.workerHours,this.$store.state.workingEmployees),this.schedule=this.$store.state.weeklyEmployees},async setProjections(){await this.$store.dispatch("setProjections")},doughnutChart(e,t){const s=document.getElementById("myDoughnutChart").getContext("2d");this.myDoughnutChart=new yt.Z(s,{type:"doughnut",data:{labels:t,datasets:[{label:"Hours",data:e,backgroundColor:["red","orange","yellow","green","blue","indigo","violet","brown","black","white"],hoverOffset:4}]},options:{maintainAspectRatio:!1,plugins:{tooltip:{callbacks:{label:function(e,t){return e.label+": $"+Number(e.parsed).toFixed(2)}}}}}}),this.myDoughnutChart},barChart(e,t,s){const a=document.getElementById("myBarChart").getContext("2d");this.myBarChart=new yt.Z(a,{type:"bar",data:{labels:s,datasets:[{label:"Venmo Total",data:e,backgroundColor:"#008CFF",borderWidth:1},{label:"Cash Total",data:t,backgroundColor:"#85bb65",borderWidth:1}]},options:{scales:{y:{beginAtZero:!0,grace:"10%",stacked:!0},x:{stacked:!0}},plugins:{datalabels:{anchor:"end",align:"top",formatter:(e,t)=>{const s=[];function a(e,t){return Number(e)+Number(t)}t.chart.data.datasets.forEach((e=>{void 0!=e.data[t.dataIndex]&&s.push(e.data[t.dataIndex])}));let r=s.reduce(a,0);return t.datasetIndex==s.length-1?`$ ${Number(r).toFixed(2)} `:""}},tooltip:{callbacks:{label:function(e,t){return e.dataset.label+": $"+Number(e.formattedValue).toFixed(2)}}}}},plugins:[ft.Z]}),this.myBarChart}},data(){return{selectedWeek:[],myBarChart:null,myDoughnutChart:null,schedule:[],addEmployee:!1,removeEmployee:!1}},beforeMount(){this.setProjections()}};const Vt=(0,R.Z)(jt,[["render",wt],["__scopeId","data-v-074c5e16"]]);var Kt=Vt;const Gt=(0,r._)("h3",{style:{color:"white"}},"Duncan Hall Grille",-1),Yt=(0,r._)("label",null,"Email: ",-1),Qt=(0,r._)("label",null,"Password: ",-1),Jt=(0,r._)("button",{class:"register"},"Login",-1),Xt=(0,r._)("img",{src:"https://images.squarespace-cdn.com/content/v1/54dfd429e4b0549c366f98dd/1599506014278-OY3IXZWIHO6CRM7ZB6UO/5Q6A9980.jpg?format=2500w",alt:"DuncanHall"},null,-1);function es(e,t,s,i,l,o){return(0,r.wg)(),(0,r.iD)(r.HY,null,[Gt,(0,r._)("form",{onSubmit:t[2]||(t[2]=(0,a.iM)(((...e)=>i.login&&i.login(...e)),["prevent"])),class:"loginForm"},[Yt,(0,r.wy)((0,r._)("input",{type:"email",required:"","onUpdate:modelValue":t[0]||(t[0]=e=>i.login_form.email=e)},null,512),[[a.nr,i.login_form.email]]),Qt,(0,r.wy)((0,r._)("input",{type:"password","onUpdate:modelValue":t[1]||(t[1]=e=>i.login_form.password=e),required:""},null,512),[[a.nr,i.login_form.password]]),Jt],32),Xt],64)}var ts=s(262),ss={setup(){const e=(0,ts.iH)({}),t=(0,u.oR)(),s=()=>{t.dispatch("login",e.value)};return{login_form:e,login:s}}};const as=(0,R.Z)(ss,[["render",es]]);var rs=as;const is=(0,r._)("h3",null,"Current Orders",-1),ls=(0,r._)("hr",null,null,-1),os={style:{"padding-top":"20px"}},ns=(0,r._)("hr",null,null,-1);function ds(e,t,s,a,i,l){const o=(0,r.up)("OrderTable"),n=(0,r.up)("NewOrderModal"),d=(0,r.up)("LogHoursModal");return(0,r.wg)(),(0,r.iD)(r.HY,null,[is,ls,(0,r.Wm)(o),(0,r._)("button",{onClick:t[0]||(t[0]=(...e)=>l.toggleOrderModal&&l.toggleOrderModal(...e))},"Create New Order"),(0,r._)("h2",os,"Nightly Total: $"+(0,Ee.zw)(Number(this.$store.state.nightTotal).toFixed(2)),1),ns,(0,r._)("button",{style:{background:"green","font-size":"20px","border-radius":"4px"},onClick:t[1]||(t[1]=(...e)=>l.toggleHoursModal&&l.toggleHoursModal(...e))},"Log Hours"),i.showOrderModal?((0,r.wg)(),(0,r.j4)(n,{key:0,onClose:l.toggleOrderModal},null,8,["onClose"])):(0,r.kq)("",!0),i.showHoursModal?((0,r.wg)(),(0,r.j4)(d,{key:1,onClose:l.toggleHoursModal},null,8,["onClose"])):(0,r.kq)("",!0)],64)}const cs={style:{display:"inline"}},us=(0,r._)("h1",{style:{display:"inline"}},"New Order",-1),hs=(0,r._)("hr",null,null,-1),ps={key:0,class:"listContainer"},ms={style:{"padding-left":"0px"}},gs=["onClick"],ws=(0,r._)("hr",null,null,-1),bs={key:1},ys=(0,r._)("hr",null,null,-1),fs=(0,r._)("p",{style:{}},"Items (click to delete)",-1),ks=["onClick"],_s=(0,r._)("hr",null,null,-1),Cs=(0,r._)("hr",null,null,-1),vs=(0,r._)("hr",null,null,-1),Ss=(0,r._)("label",{for:"cash"},"Cash Order: ",-1),Os=(0,r._)("label",{for:"cash"},"Hall Staff Order: ",-1),Ds=(0,r._)("hr",null,null,-1),Es=["disabled"],zs={key:3,style:{color:"red"}};function Rs(e,t,s,i,l,o){return(0,r.wg)(),(0,r.iD)("div",{class:"new-backdrop",onClick:t[22]||(t[22]=(0,a.iM)(((...e)=>o.closeModal&&o.closeModal(...e)),["self"]))},[(0,r._)("div",{class:"new-modal",onClick:t[21]||(t[21]=(0,a.iM)((e=>(l.modal=!1,l.toggleQuantity=!1)),["self"]))},[(0,r._)("div",cs,[us,(0,r._)("button",{onClick:t[0]||(t[0]=(...e)=>o.closeModal&&o.closeModal(...e)),type:"button",style:{display:"inline",float:"right"},class:"btn-close pull-right","aria-label":"Close"})]),hs,(0,r.wy)((0,r._)("input",{type:"text",class:"nameInput",id:"nameInput",placeholder:"Name (First and Last)","onUpdate:modelValue":t[1]||(t[1]=e=>l.currentOrder.name=e),autocomplete:"off",onInput:t[2]||(t[2]=(...e)=>o.filterCustomers&&o.filterCustomers(...e)),onFocus:t[3]||(t[3]=e=>l.modal=!0)},null,544),[[a.nr,l.currentOrder.name]]),l.filteredCustomers&&l.modal?((0,r.wg)(),(0,r.iD)("div",ps,[(0,r._)("ul",ms,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.filteredCustomers,(e=>((0,r.wg)(),(0,r.iD)("li",{class:"listItem",onClick:t=>o.setCustomer(e)},(0,Ee.zw)(e),9,gs)))),256))])])):(0,r.kq)("",!0),ws,(0,r._)("button",{style:{background:"green","margin-right":"50px"},onClick:t[4]||(t[4]=e=>o.addItem("DubBuff"))},"DubBuff"),(0,r._)("button",{style:{background:"red","margin-right":"50px"},onClick:t[5]||(t[5]=e=>o.addItem("SingleBuff"))},"SingleBuff"),(0,r._)("button",{style:{"margin-right":"50px"},onClick:t[6]||(t[6]=e=>o.addItem("CBR"))},"CBR"),(0,r._)("button",{style:{background:"black","margin-right":"50px"},onClick:t[7]||(t[7]=e=>o.addItem("Single CBR"))},"Single CBR"),(0,r._)("button",{style:{background:"#918e2d","margin-right":"50px"},onClick:t[8]||(t[8]=e=>o.addItem("Chicken Nachos"))},"Chicken Nachos"),(0,r._)("button",{style:{background:"#2d7691","margin-right":"50px"},onClick:t[9]||(t[9]=e=>o.addItem("Cheese Nachos"))},"Cheese Nachos"),(0,r._)("button",{style:{background:"#9b5f96","margin-right":"50px"},onClick:t[10]||(t[10]=e=>l.toggleQuantity=!l.toggleQuantity)},"Pizza Rolls"),(0,r._)("button",{style:{background:"#571e59","margin-right":"50px"},onClick:t[11]||(t[11]=e=>o.addItem("Soda/Gatorade"))},"Soda/Gatorade"),(0,r._)("button",{style:{background:"#1e5931","margin-right":"50px"},onClick:t[12]||(t[12]=e=>o.addItem("Ice Cream Sandwich"))},"Ice Cream Sandwich"),l.toggleQuantity?((0,r.wg)(),(0,r.iD)("hr",bs)):(0,r.kq)("",!0),l.toggleQuantity?(0,r.wy)(((0,r.wg)(),(0,r.iD)("input",{key:2,type:"number",placeholder:"Quantity:",onInput:t[13]||(t[13]=(...e)=>o.addPizzaRolls&&o.addPizzaRolls(...e)),"onUpdate:modelValue":t[14]||(t[14]=e=>l.pizzaRolls=e),onFocus:t[15]||(t[15]=e=>l.toggleQuantity=!0)},null,544)),[[a.nr,l.pizzaRolls]]):(0,r.kq)("",!0),ys,fs,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.currentOrder.items,(e=>((0,r.wg)(),(0,r.iD)("div",{key:e,class:"pill"},[(0,r._)("span",{onClick:t=>o.delItem(e)},(0,Ee.zw)(e),9,ks)])))),128)),_s,(0,r.wy)((0,r._)("input",{type:"text",placeholder:"Comments (optional)","onUpdate:modelValue":t[16]||(t[16]=e=>l.currentOrder.comments=e)},null,512),[[a.nr,l.currentOrder.comments]]),Cs,(0,r._)("h2",null,"Ticket Total: $"+(0,Ee.zw)(Number(l.currentOrder.price).toFixed(2)),1),vs,Ss,(0,r.wy)((0,r._)("input",{type:"checkbox",id:"cash","onUpdate:modelValue":t[17]||(t[17]=e=>l.currentOrder.cash=e),style:{height:"20px"}},null,512),[[a.e8,l.currentOrder.cash]]),Os,(0,r.wy)((0,r._)("input",{type:"checkbox",id:"cash","onUpdate:modelValue":t[18]||(t[18]=e=>l.hallStaffOrder=e),onClick:t[19]||(t[19]=(...e)=>o.hallStaffCheckBox&&o.hallStaffCheckBox(...e)),style:{height:"20px"}},null,512),[[a.e8,l.hallStaffOrder]]),Ds,(0,r._)("button",{disabled:!l.currentOrder.price&&!l.hallStaffOrder||!l.currentOrder.name,onClick:t[20]||(t[20]=(...e)=>o.submitOrder&&o.submitOrder(...e))},"Submit Order",8,Es),l.dayOfWeek>4?((0,r.wg)(),(0,r.iD)("p",zs,"Warning: Atypical Operation Day!")):(0,r.kq)("",!0)])])}var Ts={mounted(){this.filterCustomers()},methods:{filterCustomers(){let e=this.currentOrder.name;this.filteredCustomers=e?this.customers.map((e=>e[2])).filter((t=>t.toLowerCase().includes(e.toLowerCase()))):this.customers.map((e=>e[2]))},setCustomer(e){this.currentOrder.name=e,this.modal=!1},closeModal(){this.$emit("close")},addItem(e){if(this.currentOrder.items.push(e),!this.hallStaffOrder)switch(e){case"DubBuff":this.currentOrder.price+=5;break;case"SingleBuff":this.currentOrder.price+=3;break;case"CBR":this.currentOrder.price+=5;break;case"Cheese Nachos":this.currentOrder.price+=2.5;break;case"Chicken Nachos":this.currentOrder.price+=3.5;break;case"Single CBR":this.currentOrder.price+=3;break;case"Soda/Gatorade":this.currentOrder.price+=1.5;break;case"Ice Cream Sandwich":this.currentOrder.price+=1.5;break}},delItem(e){if(this.hallStaffOrder){let t=e.includes("Pizza Rolls");t&&(this.pizzaRolls=0,this.toggleQuantity=0)}else switch(e){case"DubBuff":this.currentOrder.price-=5;break;case"SingleBuff":this.currentOrder.price-=3;break;case"CBR":this.currentOrder.price-=5;break;case"Cheese Nachos":this.currentOrder.price-=2.5;break;case"Chicken Nachos":this.currentOrder.price-=3.5;break;case"Single CBR":this.currentOrder.price-=3;break;case"Soda/Gatorade":this.currentOrder.price-=1.5;break;case"Ice Cream Sandwich":this.currentOrder.price-=1.5;break;default:this.currentOrder.price-=.25*this.pizzaRolls,this.pizzaRolls=0,this.toggleQuantity=0;break}const t=this.currentOrder.items.indexOf(e);this.currentOrder.items.splice(t,1)},addPizzaRolls(){let e=this.currentOrder.items.find((e=>/^([0-9]*) (Pizza Rolls)$/.test(e)));if(e){const t=this.currentOrder.items.indexOf(e),s=Number(this.currentOrder.items[t].slice(0,-11));this.hallStaffOrder||(this.currentOrder.price-=.25*s),this.currentOrder.items.splice(t,1)}this.pizzaRolls>0&&(this.currentOrder.items.push(`${this.pizzaRolls} Pizza Rolls`),this.hallStaffOrder||(this.currentOrder.price+=.25*this.pizzaRolls))},onlyLettersAndNumbers(e){return e.replace(/[^a-z0-9 ]+/gi," ")},async submitOrder(){this.$emit("close");const e=this.customers.filter((e=>e[2]==this.currentOrder.name));0!=e.length?this.currentOrder.custId=Number(e[0][0]):this.currentOrder.custId=155;let t=new Date;this.currentOrder.time=t.toLocaleTimeString();let s=this.encodeOrders(this.currentOrder.items);this.currentOrder.comments=this.onlyLettersAndNumbers(this.currentOrder.comments);try{let e=this.currentOrder;this.insertOrder(e.price,s,this.currentOrder.custId,this.$store.state.currDay,this.$store.state.currWeek,e.cash,e.online,e.done,e.comments)}catch(a){console.log(a)}},async insertOrder(e,t,s,a,r,i,l,o,n){let d=new Date;console.log(d.toTimeString().slice(0,8));const c=`INSERT INTO orders (price, items, order_time, order_day, order_datetime, week_id, cust_id, cash, online, done, comments) values (${e}, ${t},"${String(d.toTimeString().slice(0,8))}", "${a}", "${this.formatDate(d)}", ${r}, ${s}, ${i}, ${l}, ${o}, "${n}");`;try{await It.ZP.post("https://duncan-grille-api.azurewebsites.net/api/place-order",{sql:c})}catch(u){console.log(c),console.log(u)}await this.$store.dispatch("getOrdersByDay")},encodeOrders(e){let t={pizza:2,dubbuff:3,singlebuff:5,cbr:7,single:11,cheese:13,chicken:17,"soda/gatorade":19,ice:23},s=1;for(let a=0;a<e.length;a++)if(e[a].includes("Pizza")){let t=e[a].split(" ");s*=Math.pow(2,Number(t[0]))}else{let r=e[a].split(" ")[0];s*=t[r.toLowerCase()]}return s},formatDate(e){return`${e.getFullYear()}-${e.getMonth()+1>=10?e.getMonth()+1:"0"+(e.getMonth()+1)}-${e.getDate()>=10?e.getDate():"0"+e.getDate()} ${e.getHours()>=10?e.getHours():"0"+e.getHours()}:${e.getMinutes()>=10?e.getMinutes():"0"+e.getMinutes()}:${e.getSeconds()>=10?e.getSeconds():"0"+e.getSeconds()}`},hallStaffCheckBox(){if(this.hallStaffOrder)for(let e=0;e<this.currentOrder.items.length;e++)switch(this.currentOrder.items[e]){case"DubBuff":this.currentOrder.price+=5;break;case"SingleBuff":this.currentOrder.price+=3;break;case"DubBuff - HS":this.currentOrder.price+=5;break;case"SingleBuff - HS":this.currentOrder.price+=3;break;case"CBR":this.currentOrder.price+=5;break;case"Cheese Nachos":this.currentOrder.price+=2.5;break;case"Chicken Nachos":this.currentOrder.price+=3.5;break;case"Single CBR":this.currentOrder.price+=3;break;case"Soda/Gatorade":this.currentOrder.price+=1.5;break;case"Ice Cream Sandwich":this.currentOrder.price+=1.5;break;default:this.currentOrder.price+=.25*this.pizzaRolls;break}else this.currentOrder.price=0}},data(){return{currentOrder:{name:"",custId:null,items:[],comments:"",price:0,date:new Date,time:null,done:!1,cash:!1,online:!1,email:null},dayOfWeek:(new Date).getDay(),customers:this.$store.state.customerBase,filteredCustomers:[],modal:!1,toggleQuantity:!1,pizzaRolls:null,hallStaffOrder:!1}}};const Is=(0,R.Z)(Ts,[["render",Rs]]);var $s=Is;const Ns={key:1,class:"table"},xs=(0,r._)("thead",null,[(0,r._)("tr",null,[(0,r._)("th",{scope:"col"},"#"),(0,r._)("th",{scope:"col"},"$"),(0,r._)("th",{scope:"col"},"Type"),(0,r._)("th",{scope:"col"},"Time"),(0,r._)("th",{scope:"col"},"Name"),(0,r._)("th",{scope:"col"},"Order"),(0,r._)("th",{scope:"col"},"Comments"),(0,r._)("th",{scope:"col"},"Price")])],-1),Us={key:0},Bs={scope:"row"},Ws={key:0},Hs={key:1},Ms={style:{"word-wrap":"break-word","max-width":"400px"}},Ps={key:2},Fs={key:3};function qs(e,t,s,a,i,l){const o=(0,r.up)("ConfirmModal"),n=(0,r.up)("fa");return(0,r.wg)(),(0,r.iD)(r.HY,null,[i.deleteModal?((0,r.wg)(),(0,r.j4)(o,{key:0,onDenied:l.toggleModal,onConfirmed:l.confirmDelete},null,8,["onDenied","onConfirmed"])):(0,r.kq)("",!0),this.$store.state.orders?((0,r.wg)(),(0,r.iD)("table",Ns,[xs,this.$store.state.orders?((0,r.wg)(),(0,r.iD)("tbody",Us,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(this.$store.state.orders,((t,s)=>((0,r.wg)(),(0,r.iD)("tr",{class:(0,Ee.C_)({online:"1"==t[9]&&"0"==t[10],completed:"1"==t[10]})},[(0,r._)("th",Bs,(0,Ee.zw)(s+1),1),(0,r._)("td",null,["1"==t[8]?((0,r.wg)(),(0,r.j4)(n,{key:0,icon:"money-bill",style:{color:"green"}})):((0,r.wg)(),(0,r.j4)(n,{key:1,icon:"v",style:{color:"blue"}}))]),(0,r._)("td",null,["1"==t[9]?((0,r.wg)(),(0,r.j4)(n,{key:0,icon:"computer",style:{color:"black"}})):((0,r.wg)(),(0,r.j4)(n,{key:1,icon:"people-arrows"}))]),(0,r._)("td",null,(0,Ee.zw)(t[3]),1),"None"==t[7]?((0,r.wg)(),(0,r.iD)("td",Ws,"Customer")):((0,r.wg)(),(0,r.iD)("td",Hs,(0,Ee.zw)(this.$store.state.customerBaseInd[t[7]][2]),1)),(0,r._)("td",null,(0,Ee.zw)(l.decodeOrder(t[2])),1),(0,r._)("td",Ms,(0,Ee.zw)(t[11]),1),"0"==t[9]?((0,r.wg)(),(0,r.iD)("td",Ps,"$"+(0,Ee.zw)(Number(t[1]).toFixed(2)),1)):((0,r.wg)(),(0,r.iD)("td",Fs,"$"+(0,Ee.zw)(Number(t[1]-.5).toFixed(2)),1)),(0,r._)("td",null,[(0,r.Wm)(n,{icon:"check-to-slot",onClick:e=>l.toggleDone(t),style:{color:"green",cursor:"pointer"}},null,8,["onClick"])]),(0,r._)("td",null,[(0,r.Wm)(n,{icon:"pen-to-square",onClick:s=>e.$router.push({path:`/orders/edit/${t[0]}`}),style:{color:"#2c3e50",cursor:"pointer"}},null,8,["onClick"])]),(0,r._)("td",null,[(0,r.Wm)(n,{icon:"trash-can",onClick:e=>l.toggleDel(t[0]),style:{color:"red",cursor:"pointer"}},null,8,["onClick"])])],2)))),256))])):(0,r.kq)("",!0)])):(0,r.kq)("",!0)],64)}const Zs=e=>((0,r.dD)("data-v-80f183e0"),e=e(),(0,r.Cn)(),e),Ls={class:"new-modal"},As=Zs((()=>(0,r._)("h1",null,"Are You Sure?",-1)));function js(e,t,s,i,l,o){return(0,r.wg)(),(0,r.iD)("div",{class:"new-backdrop",onClick:t[2]||(t[2]=(0,a.iM)(((...e)=>o.deny&&o.deny(...e)),["self"]))},[(0,r._)("div",Ls,[As,(0,r._)("button",{onClick:t[0]||(t[0]=(...e)=>o.confirm&&o.confirm(...e)),style:{"background-color":"red"}}," Yes "),(0,r._)("button",{onClick:t[1]||(t[1]=(...e)=>o.deny&&o.deny(...e))}," No ")])])}var Vs={methods:{deny(){this.$emit("denied")},confirm(){this.$emit("confirmed")}}};const Ks=(0,R.Z)(Vs,[["render",js],["__scopeId","data-v-80f183e0"]]);var Gs=Ks,Ys={components:{ConfirmModal:Gs},data(){return{deleteModal:!1,delId:null}},methods:{async toggleDone(e){this.$store.dispatch("completeOrder",{order:e,name:this.$store.state.customerBaseInd[e[7]][2],email:this.$store.state.customerBaseInd[e[7]][1],price:Number(e[1]).toFixed(2),items:this.decodeOrder(e[2])})},toggleModal(){this.deleteModal=!this.deleteModal},toggleDel(e){this.$store.dispatch("deleteOrder",{id:e})},async confirmDelete(){this.deleteModal=!this.deleteModal,await(0,le.oe)((0,le.JU)(_e,this.delId))},decodeOrder(e){let t={2:"pizza",3:"Dubbuff",5:"Singlebuff",7:"CBR",11:"Single CBR",13:"Cheese Nachos",17:"Chicken Nachos",19:"Soda/Gatorade",23:"Ice Cream"},s=[],a=0;while(e%2==0)e/=2,a++;a&&s.push(`${a} Pizza Rolls`);for(const r in t)if(2!=r)while(e%r==0)s.push(t[r]),e/=r;return s.join(", ")}}};const Qs=(0,R.Z)(Ys,[["render",qs]]);var Js=Qs;const Xs={class:"new-modal"},ea=(0,r._)("h2",null,"Log Hours",-1),ta=(0,r._)("label",{for:"employees"},"Select Your Name:",-1),sa=["value"],aa=(0,r._)("label",{for:"hours"}," Enter Your Hours:",-1),ra={id:"hours"},ia=(0,r._)("p",{style:{"font-style":"normal",color:"rgb(161, 154, 154)","font-size":"12px"}},"Example: 2.5, 1.3, 2.0, etc",-1),la={key:0},oa={key:1},na={key:2,style:{color:"red","font-size":"12px"}},da=["disabled"];function ca(e,t,s,i,l,o){return(0,r.wg)(),(0,r.iD)("div",{class:"new-backdrop",onClick:t[3]||(t[3]=(0,a.iM)(((...e)=>o.closeModal&&o.closeModal(...e)),["self"]))},[(0,r._)("div",Xs,[ea,ta,(0,r.wy)((0,r._)("select",{name:"employees",id:"employees","onUpdate:modelValue":t[0]||(t[0]=e=>this.hoursObj.employee=e)},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(this.$store.state.employees,(e=>((0,r.wg)(),(0,r.iD)("option",{value:e},(0,Ee.zw)(e[2]),9,sa)))),256))],512),[[a.bM,this.hoursObj.employee]]),aa,(0,r._)("div",ra,[(0,r.wy)((0,r._)("input",{type:"number","onUpdate:modelValue":t[1]||(t[1]=e=>this.hoursObj.hours=e)},null,512),[[a.nr,this.hoursObj.hours]]),ia]),this.hoursObj.employee?((0,r.wg)(),(0,r.iD)("p",la,"Employee: "+(0,Ee.zw)(this.hoursObj.employee[2]),1)):(0,r.kq)("",!0),this.hoursObj.hours?((0,r.wg)(),(0,r.iD)("p",oa,"Hours: "+(0,Ee.zw)(this.hoursObj.hours),1)):(0,r.kq)("",!0),this.hoursObj.hours>3?((0,r.wg)(),(0,r.iD)("p",na,"Maximum of 3 hours")):(0,r.kq)("",!0),(0,r._)("button",{disabled:this.hoursObj.hours>3||!this.hoursObj.employee||!this.hoursObj.hours,onClick:t[2]||(t[2]=(...e)=>o.submitHours&&o.submitHours(...e))},"Submit Hours",8,da)])])}var ua={data(){return{hoursObj:{employee:null,hours:null}}},methods:{closeModal(){this.$emit("close")},async submitHours(){console.log(this.hoursObj.employee),this.$emit("close");let e=this.hoursObj.employee[0];this.$store.dispatch("logHours",{id:Number(e),hours:this.hoursObj.hours})}}};const ha=(0,R.Z)(ua,[["render",ca]]);var pa=ha,ma={data(){return{showOrderModal:!1,showHoursModal:!1,total:0}},mounted(){this.$store.dispatch("getOrdersByDay")},methods:{toggleOrderModal(){this.showOrderModal=!this.showOrderModal},toggleHoursModal(){this.showHoursModal=!this.showHoursModal}},components:{NewOrderModal:$s,OrderTable:Js,LogHoursModal:pa}};const ga=(0,R.Z)(ma,[["render",ds]]);var wa=ga;const ba={style:{display:"inline"}},ya=(0,r._)("h1",{style:{display:"inline"}},"Update Order",-1),fa=(0,r._)("hr",null,null,-1),ka={key:0,class:"listContainer"},_a={style:{"padding-left":"0px"}},Ca=["onClick"],va=(0,r._)("hr",null,null,-1),Sa={key:1},Oa=(0,r._)("hr",null,null,-1),Da=(0,r._)("p",{style:{}},"Items (click to delete)",-1),Ea=["onClick"],za=(0,r._)("hr",null,null,-1),Ra=(0,r._)("hr",null,null,-1),Ta=(0,r._)("hr",null,null,-1),Ia=(0,r._)("label",{for:"cash"},"Cash Order: ",-1),$a=(0,r._)("label",{for:"cash"},"Hall Staff Order: ",-1),Na=(0,r._)("hr",null,null,-1),xa=["disabled"];function Ua(e,t,s,i,l,o){return(0,r.wg)(),(0,r.iD)("div",{class:"new-backdrop",onClick:t[22]||(t[22]=(0,a.iM)((t=>e.$router.push({name:"past-orders"})),["self"]))},[(0,r._)("div",{class:"new-modal",onClick:t[21]||(t[21]=(0,a.iM)((e=>(l.modal=!1,l.toggleQuantity=!1)),["self"]))},[(0,r._)("div",ba,[ya,(0,r._)("button",{onClick:t[0]||(t[0]=t=>e.$router.push({name:"orders"})),type:"button",style:{display:"inline",float:"right"},class:"btn-close pull-right","aria-label":"Close"})]),fa,(0,r.wy)((0,r._)("input",{type:"text",class:"nameInput",id:"nameInput",placeholder:"Name (First and Last)","onUpdate:modelValue":t[1]||(t[1]=e=>l.name=e),autocomplete:"off",onInput:t[2]||(t[2]=(...e)=>o.filterCustomers&&o.filterCustomers(...e)),onFocus:t[3]||(t[3]=e=>l.modal=!0)},null,544),[[a.nr,l.name]]),l.filteredCustomers&&l.modal?((0,r.wg)(),(0,r.iD)("div",ka,[(0,r._)("ul",_a,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.filteredCustomers,(e=>((0,r.wg)(),(0,r.iD)("li",{class:"listItem",onClick:t=>o.setCustomer(e)},(0,Ee.zw)(e),9,Ca)))),256))])])):(0,r.kq)("",!0),va,(0,r._)("button",{style:{background:"green","margin-right":"50px"},onClick:t[4]||(t[4]=e=>o.addItem("DubBuff"))},"DubBuff"),(0,r._)("button",{style:{background:"red","margin-right":"50px"},onClick:t[5]||(t[5]=e=>o.addItem("SingleBuff"))},"SingleBuff"),(0,r._)("button",{style:{"margin-right":"50px"},onClick:t[6]||(t[6]=e=>o.addItem("CBR"))},"CBR"),(0,r._)("button",{style:{background:"black","margin-right":"50px"},onClick:t[7]||(t[7]=e=>o.addItem("Single CBR"))},"Single CBR"),(0,r._)("button",{style:{background:"#918e2d","margin-right":"50px"},onClick:t[8]||(t[8]=e=>o.addItem("Chicken Nachos"))},"Chicken Nachos"),(0,r._)("button",{style:{background:"#2d7691","margin-right":"50px"},onClick:t[9]||(t[9]=e=>o.addItem("Cheese Nachos"))},"Cheese Nachos"),(0,r._)("button",{style:{background:"#9b5f96","margin-right":"50px"},onClick:t[10]||(t[10]=e=>l.toggleQuantity=!l.toggleQuantity)},"Pizza Rolls"),(0,r._)("button",{style:{background:"#571e59","margin-right":"50px"},onClick:t[11]||(t[11]=e=>o.addItem("Soda/Gatorade"))},"Soda/Gatorade"),(0,r._)("button",{style:{background:"#1e5931","margin-right":"50px"},onClick:t[12]||(t[12]=e=>o.addItem("Ice Cream Sandwich"))},"Ice Cream Sandwich"),l.toggleQuantity?((0,r.wg)(),(0,r.iD)("hr",Sa)):(0,r.kq)("",!0),l.toggleQuantity?(0,r.wy)(((0,r.wg)(),(0,r.iD)("input",{key:2,type:"number",placeholder:"Quantity:",onInput:t[13]||(t[13]=(...e)=>o.addPizzaRolls&&o.addPizzaRolls(...e)),"onUpdate:modelValue":t[14]||(t[14]=e=>l.pizzaRolls=e),onFocus:t[15]||(t[15]=e=>l.toggleQuantity=!0)},null,544)),[[a.nr,l.pizzaRolls]]):(0,r.kq)("",!0),Oa,Da,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.items,(e=>((0,r.wg)(),(0,r.iD)("div",{key:e,class:"pill"},[(0,r._)("span",{onClick:t=>o.delItem(e)},(0,Ee.zw)(e),9,Ea)])))),128)),za,(0,r.wy)((0,r._)("input",{type:"text",placeholder:"Comments (optional)","onUpdate:modelValue":t[16]||(t[16]=e=>l.comments=e)},null,512),[[a.nr,l.comments]]),Ra,(0,r._)("h2",null,"Ticket Total: $"+(0,Ee.zw)(Number(l.price).toFixed(2)),1),Ta,Ia,(0,r.wy)((0,r._)("input",{type:"checkbox",id:"cash","onUpdate:modelValue":t[17]||(t[17]=e=>l.cash=e),style:{height:"20px"}},null,512),[[a.e8,l.cash]]),$a,(0,r.wy)((0,r._)("input",{type:"checkbox",id:"cash","onUpdate:modelValue":t[18]||(t[18]=e=>l.hallStaffOrder=e),onClick:t[19]||(t[19]=(...e)=>o.hallStaffCheckBox&&o.hallStaffCheckBox(...e)),style:{height:"20px"}},null,512),[[a.e8,l.hallStaffOrder]]),Na,(0,r._)("button",{disabled:!l.price&&!l.hallStaffOrder||!l.name,onClick:t[20]||(t[20]=(...e)=>o.updateOrder&&o.updateOrder(...e))},"Update Order",8,xa)])])}var Ba={async mounted(){const e=this.$route.params.id;this.orderId=e,await this.getOrder(),this.filterCustomers()},methods:{filterCustomers(){let e=this.name;this.filteredCustomers=e?this.customers.map((e=>e[2])).filter((t=>t.toLowerCase().includes(e.toLowerCase()))):this.customers.map((e=>e[2]))},setCustomer(e){this.name=e,this.modal=!1},closeModal(){this.$router.push({name:"orders"})},addItem(e){if(this.items.push(e),!this.hallStaffOrder)switch(e){case"DubBuff":this.price+=5;break;case"SingleBuff":this.price+=3;break;case"CBR":this.price+=5;break;case"Cheese Nachos":this.price+=2.5;break;case"Chicken Nachos":this.price+=3.5;break;case"Single CBR":this.price+=3;break;case"Soda/Gatorade":this.price+=1.5;break;case"Ice Cream Sandwich":this.price+=1.5;break}},delItem(e){if(this.hallStaffOrder){let t=e.includes("Pizza Rolls");t&&(this.pizzaRolls=0,this.toggleQuantity=0)}else switch(e){case"DubBuff":this.price-=5;break;case"SingleBuff":this.price-=3;break;case"CBR":this.price-=5;break;case"Cheese Nachos":this.price-=2.5;break;case"Chicken Nachos":this.price-=3.5;break;case"Single CBR":this.price-=3;break;case"Soda/Gatorade":this.price-=1.5;break;case"Ice Cream Sandwich":this.price-=1.5;break;default:this.price-=.25*this.pizzaRolls,this.pizzaRolls=0,this.toggleQuantity=0;break}const t=this.items.indexOf(e);this.items.splice(t,1)},addPizzaRolls(){let e=this.items.find((e=>/^([0-9]*) (Pizza Rolls)$/.test(e)));if(e){const t=this.items.indexOf(e),s=Number(this.items[t].slice(0,-11));this.hallStaffOrder||(this.price-=.25*s),this.items.splice(t,1)}this.pizzaRolls>0&&(this.items.push(`${this.pizzaRolls} Pizza Rolls`),this.hallStaffOrder||(this.price+=.25*this.pizzaRolls))},async updateOrder(){let e=this.$store.state.customerBase.filter((e=>e[2].toLowerCase()==this.name.toLowerCase()));this.selectedOrder[7]=e[0][0],this.selectedOrder[2]=this.encodeOrders(this.items),this.selectedOrder[11]=this.comments,this.selectedOrder[8]=this.cash?1:0,this.selectedOrder[1]=this.price,this.$store.dispatch("updateOrder",{order:this.selectedOrder}),this.$router.push({name:"orders"})},async getOrder(){await this.$store.dispatch("getOrderById",{id:this.orderId});const e=this.$store.state.editOrder;this.selectedOrder=e,this.name=this.$store.state.customerBaseInd[Number(e[7])][2],this.items=this.decodeOrder(Number(e[2])),this.comments=e[11],this.cash=1==Number(e[8]),this.price=Number(e[1]),this.price||(this.hallStaffOrder=!0)},decodeOrder(e){let t={2:"pizza",3:"DubBuff",5:"SingleBuff",7:"CBR",11:"Single CBR",13:"Cheese Nachos",17:"Chicken Nachos",19:"Soda/Gatorade",23:"Ice Cream"},s=[],a=0;while(e%2==0)e/=2,a++;a&&s.push(`${a} Pizza Rolls`);for(const r in t)if(2!=r)while(e%r==0)s.push(t[r]),e/=r;return s},encodeOrders(e){let t={pizza:2,dubbuff:3,singlebuff:5,cbr:7,single:11,cheese:13,chicken:17,"soda/gatorade":19,ice:23},s=1;for(let a=0;a<e.length;a++)if(e[a].includes("Pizza")){let t=e[a].split(" ");s*=Math.pow(2,Number(t[0]))}else{let r=e[a].split(" ")[0];s*=t[r.toLowerCase()]}return s},hallStaffCheckBox(){if(this.hallStaffOrder)for(let e=0;e<this.items.length;e++)switch(this.items[e]){case"DubBuff":this.price+=5;break;case"SingleBuff":this.price+=3;break;case"CBR":this.price+=5;break;case"Cheese Nachos":this.price+=2.5;break;case"Chicken Nachos":this.price+=3.5;break;case"Single CBR":this.price+=3;break;case"Soda/Gatorade":this.price+=1.5;break;case"Ice Cream Sandwich":this.price+=1.5;break;default:this.price+=.25*this.pizzaRolls;break}else this.price=0}},data(){return{selectedOrder:[],orderId:null,customers:this.$store.state.customerBase,filteredCustomers:[],modal:!1,hallStaffOrder:!1,toggleQuantity:!1,name:"",items:[],comments:"",cash:null,price:null,pizzaRolls:null}}};const Wa=(0,R.Z)(Ba,[["render",Ua]]);var Ha=Wa;const Ma=(0,r._)("h3",null,"Inventory Page",-1),Pa={class:"card",style:{width:"98%","margin-right":"10px","margin-left":"10px"}},Fa=(0,r._)("p",null," Inventory in Stock",-1),qa={key:0,class:"card",style:{width:"98%","margin-right":"10px","margin-left":"10px"}},Za=(0,r._)("p",null,"Update Inventory",-1),La=(0,r._)("label",{for:"chickenInput"},"Chicken Storage",-1),Aa=(0,r._)("label",{for:"cheeseInput"},"Cheese Storage",-1),ja=(0,r._)("label",{for:"chipsInput"},"Chips Storage",-1),Va=(0,r._)("label",{for:"baconInput"},"bacon Storage",-1),Ka=["disabled"],Ga=(0,r._)("label",{for:"weeks"},"Inventory Info For:",-1),Ya=["value"],Qa={key:1,class:"card",style:{float:"left",width:"48%","margin-left":"10px"}},Ja=(0,r._)("div",{id:"chart-wrapper"},[(0,r._)("canvas",{id:"myBarChart",width:"300",height:"200",style:{"margin-top":"5px"}})],-1),Xa=(0,r._)("p",null,"Approximate Inventory Usage:",-1),er={key:2,class:"card",style:{float:"right",width:"48%","margin-right":"10px"}},tr={class:"table"},sr=(0,r._)("thead",null,[(0,r._)("tr",null,[(0,r._)("th",{scope:"col"},"Date"),(0,r._)("th",{scope:"col"},"$"),(0,r._)("th",{scope:"col"},"Reason")])],-1),ar=(0,r._)("label",{for:"dateInput"},"Date of Cost",-1),rr=(0,r._)("label",{for:"dollarInput"},"Cost in $",-1),ir=(0,r._)("label",{for:"costInput"},"Reason for Cost",-1),lr=["disabled"],or=(0,r._)("hr",null,null,-1),nr={class:"card",style:{width:"98%","margin-right":"10px","margin-left":"10px"}},dr=(0,r._)("p",null,"Historical Stats",-1),cr=(0,r._)("canvas",{id:"TotalChart",style:{"max-width":"50%","max-height":"600px","margin-top":"5px","margin-left":"25%"}},null,-1),ur={class:"card",style:{width:"98%","margin-right":"10px","margin-left":"10px"}},hr=(0,r._)("p",null,"Day of Week Stats",-1),pr=(0,r._)("p",null,"Sunday",-1),mr=(0,r._)("p",null,"Monday",-1),gr=(0,r._)("p",null,"Tuesday",-1),wr=(0,r._)("p",null,"Wednesday",-1),br=(0,r._)("p",null,"Thursday",-1);function yr(e,t,s,i,l,o){const n=(0,r.up)("fa");return(0,r.wg)(),(0,r.iD)(r.HY,null,[Ma,(0,r._)("div",Pa,[Fa,(0,r._)("p",null,"Chicken Units: "+(0,Ee.zw)(l.chickenStorage)+" Bags. Will last "+(0,Ee.zw)(l.daysLeft.chicken)+" days",1),(0,r._)("p",null,"Cheese Units: "+(0,Ee.zw)(l.cheeseStorage)+" Bags. Will last "+(0,Ee.zw)(l.daysLeft.cheese)+" days",1),(0,r._)("p",null,"Chips Units: "+(0,Ee.zw)(l.chipsStorage)+" Bags. Will last "+(0,Ee.zw)(l.daysLeft.chips)+" days",1),(0,r._)("p",null,"Bacon Units: "+(0,Ee.zw)(l.baconStorage)+" Bags. Will last "+(0,Ee.zw)(l.daysLeft.bacon)+" days",1)]),l.selectedWeek?((0,r.wg)(),(0,r.iD)("div",qa,[Za,La,(0,r.wy)((0,r._)("input",{type:"number",min:"0",step:"1",name:"chickenInput","onUpdate:modelValue":t[0]||(t[0]=e=>l.chickenInvenUpdate=e)},null,512),[[a.nr,l.chickenInvenUpdate]]),Aa,(0,r.wy)((0,r._)("input",{type:"number",min:"0",step:"1",name:"cheeseInput","onUpdate:modelValue":t[1]||(t[1]=e=>l.cheeseInvenUpdate=e)},null,512),[[a.nr,l.cheeseInvenUpdate]]),ja,(0,r.wy)((0,r._)("input",{type:"number",min:"0",step:"1",name:"chipsnInput","onUpdate:modelValue":t[2]||(t[2]=e=>l.chipsInvenUpdate=e)},null,512),[[a.nr,l.chipsInvenUpdate]]),Va,(0,r.wy)((0,r._)("input",{type:"number",min:"0",step:"1",name:"baconInput","onUpdate:modelValue":t[3]||(t[3]=e=>l.baconInvenUpdate=e)},null,512),[[a.nr,l.baconInvenUpdate]]),(0,r._)("button",{onClick:t[4]||(t[4]=(...e)=>o.updateInventory&&o.updateInventory(...e)),disabled:!l.chickenInvenUpdate&&!l.cheeseInvenUpdate&&!l.chipsInvenUpdate&&!l.baconInvenUpdate},"Update Inventory",8,Ka)])):(0,r.kq)("",!0),Ga,(0,r.wy)((0,r._)("select",{name:"weeks",id:"weeks",onChange:t[5]||(t[5]=(...e)=>o.changeWeek&&o.changeWeek(...e)),"onUpdate:modelValue":t[6]||(t[6]=e=>l.selectedWeek=e)},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(this.$store.state.weeks,(e=>((0,r.wg)(),(0,r.iD)("option",{value:e}," Week of "+(0,Ee.zw)(e[1].split(" ")[0]),9,Ya)))),256))],544),[[a.bM,l.selectedWeek]]),l.selectedWeek?((0,r.wg)(),(0,r.iD)("div",Qa,[(0,r._)("p",null,"Sales Distribution for Week of "+(0,Ee.zw)(l.selectedWeek[1].split(" ")[0]),1),Ja,Xa,(0,r._)("p",null,"Chicken Units: "+(0,Ee.zw)(l.chicken)+" -> "+(0,Ee.zw)(l.chickenUsage)+" Bags",1),(0,r._)("p",null,"Cheese Units: "+(0,Ee.zw)(l.cheese)+" -> "+(0,Ee.zw)(l.cheeseUsage)+" Bags",1),(0,r._)("p",null,"Chips Units: "+(0,Ee.zw)(l.chips)+" -> "+(0,Ee.zw)(l.chipsUsage)+" Bags",1),(0,r._)("p",null,"Bacon Units: "+(0,Ee.zw)(l.bacon)+" -> "+(0,Ee.zw)(l.baconUsage)+" Bags",1)])):(0,r.kq)("",!0),l.selectedWeek?((0,r.wg)(),(0,r.iD)("div",er,[(0,r._)("p",null,"Costs for "+(0,Ee.zw)(l.selectedWeek[1].split(" ")[0]),1),(0,r._)("table",tr,[sr,(0,r._)("tbody",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(this.weeklyCosts,(e=>((0,r.wg)(),(0,r.iD)("tr",null,[(0,r._)("td",null,(0,Ee.zw)(e[3].split(" ")[0]),1),(0,r._)("td",null," $"+(0,Ee.zw)(Number(e[2]).toFixed(2)),1),(0,r._)("td",null,(0,Ee.zw)(e[4]),1),(0,r._)("td",null,[(0,r.Wm)(n,{icon:"trash-can",onClick:t=>o.delStoreRun(e[0]),style:{color:"red",cursor:"pointer"}},null,8,["onClick"])])])))),256))])]),ar,(0,r.wy)((0,r._)("input",{type:"date","onUpdate:modelValue":t[7]||(t[7]=e=>l.storeDate=e),name:"dateInput"},null,512),[[a.nr,l.storeDate]]),rr,(0,r.wy)((0,r._)("input",{type:"number",min:"0.01",step:"0.01",name:"dollarInput","onUpdate:modelValue":t[8]||(t[8]=e=>l.storeCost=e)},null,512),[[a.nr,l.storeCost]]),ir,(0,r.wy)((0,r._)("input",{type:"text",name:"costInput","onUpdate:modelValue":t[9]||(t[9]=e=>l.storeReason=e)},null,512),[[a.nr,l.storeReason]]),(0,r._)("button",{onClick:t[10]||(t[10]=(...e)=>o.addStoreRun&&o.addStoreRun(...e)),disabled:!l.storeDate||!l.storeCost||!l.storeReason},"Add Cost",8,lr)])):(0,r.kq)("",!0),or,(0,r._)("div",nr,[dr,cr,(0,r._)("p",null,"Dubbuff: "+(0,Ee.zw)(l.tdubbuff_count),1),(0,r._)("p",null,"Singlebuff: "+(0,Ee.zw)(l.tsinglebuff_count),1),(0,r._)("p",null,"CBR: "+(0,Ee.zw)(l.tCBR_count),1),(0,r._)("p",null,"SingleCBR: "+(0,Ee.zw)(l.tsingleCBR_count),1),(0,r._)("p",null,"ChickenNacho: "+(0,Ee.zw)(l.tchickenNacho_count),1),(0,r._)("p",null,"CheeseNacho: "+(0,Ee.zw)(l.tcheeseNacho_count),1)]),(0,r._)("div",ur,[hr,pr,(0,r._)("p",null,"Dubbuff: "+(0,Ee.zw)(l.wdubbuff_count["SU"].toFixed(2))+" Singlebuff: "+(0,Ee.zw)(l.wsinglebuff_count["SU"].toFixed(2))+" CBR: "+(0,Ee.zw)(l.wCBR_count["SU"].toFixed(2))+" SingleCBR: "+(0,Ee.zw)(l.wsingleCBR_count["SU"].toFixed(2))+" ChickenNacho: "+(0,Ee.zw)(l.wchickenNacho_count["SU"].toFixed(2))+" CheeseNacho: "+(0,Ee.zw)(l.wcheeseNacho_count["SU"].toFixed(2)),1),mr,(0,r._)("p",null,"Dubbuff: "+(0,Ee.zw)(l.wdubbuff_count["MO"].toFixed(2))+" Singlebuff: "+(0,Ee.zw)(l.wsinglebuff_count["MO"].toFixed(2))+" CBR: "+(0,Ee.zw)(l.wCBR_count["MO"].toFixed(2))+" SingleCBR: "+(0,Ee.zw)(l.wsingleCBR_count["MO"].toFixed(2))+" ChickenNacho: "+(0,Ee.zw)(l.wchickenNacho_count["MO"].toFixed(2))+" CheeseNacho: "+(0,Ee.zw)(l.wcheeseNacho_count["MO"].toFixed(2)),1),gr,(0,r._)("p",null,"Dubbuff: "+(0,Ee.zw)(l.wdubbuff_count["TU"].toFixed(2))+" Singlebuff: "+(0,Ee.zw)(l.wsinglebuff_count["TU"].toFixed(2))+" CBR: "+(0,Ee.zw)(l.wCBR_count["TU"].toFixed(2))+" SingleCBR: "+(0,Ee.zw)(l.wsingleCBR_count["TU"].toFixed(2))+" ChickenNacho: "+(0,Ee.zw)(l.wchickenNacho_count["TU"].toFixed(2))+" CheeseNacho: "+(0,Ee.zw)(l.wcheeseNacho_count["TU"].toFixed(2)),1),wr,(0,r._)("p",null,"Dubbuff: "+(0,Ee.zw)(l.wdubbuff_count["WE"].toFixed(2))+" Singlebuff: "+(0,Ee.zw)(l.wsinglebuff_count["WE"].toFixed(2))+" CBR: "+(0,Ee.zw)(l.wCBR_count["WE"].toFixed(2))+" SingleCBR: "+(0,Ee.zw)(l.wsingleCBR_count["WE"].toFixed(2))+" ChickenNacho: "+(0,Ee.zw)(l.wchickenNacho_count["WE"].toFixed(2))+" CheeseNacho: "+(0,Ee.zw)(l.wcheeseNacho_count["WE"].toFixed(2)),1),br,(0,r._)("p",null,"Dubbuff: "+(0,Ee.zw)(l.wdubbuff_count["TH"].toFixed(2))+" Singlebuff: "+(0,Ee.zw)(l.wsinglebuff_count["TH"].toFixed(2))+" CBR: "+(0,Ee.zw)(l.wCBR_count["TH"].toFixed(2))+" SingleCBR: "+(0,Ee.zw)(l.wsingleCBR_count["TH"].toFixed(2))+" ChickenNacho: "+(0,Ee.zw)(l.wchickenNacho_count["TH"].toFixed(2))+" CheeseNacho: "+(0,Ee.zw)(l.wcheeseNacho_count["TH"].toFixed(2)),1)])],64)}var fr={data(){return{selectedWeek:null,selectedWeekInven:null,dubbuff_count:0,singlebuff_count:0,singleCBR_count:0,CBR_count:0,chickenNacho_count:0,cheeseNacho_count:0,myBarChart:null,chicken:0,cheese:0,bacon:0,chips:0,chickenUsage:0,cheeseUsage:0,chipsUsage:0,baconUsage:0,chickenStorage:0,cheeseStorage:0,chipsStorage:0,baconStorage:0,chickenInvenUpdate:null,cheeseInvenUpdate:null,chipsInvenUpdate:null,baconInvenUpdate:null,weeklyCosts:null,storeDate:null,storeCost:null,storeReason:null,inventoryExist:!0,tdubbuff_count:0,tsinglebuff_count:0,tsingleCBR_count:0,tCBR_count:0,tchickenNacho_count:0,tcheeseNacho_count:0,TotalChart:null,wdubbuff_count:{SU:0,MO:0,TU:0,WE:0,TH:0},wsinglebuff_count:{SU:0,MO:0,TU:0,WE:0,TH:0},wsingleCBR_count:{SU:0,MO:0,TU:0,WE:0,TH:0},wCBR_count:{SU:0,MO:0,TU:0,WE:0,TH:0},wchickenNacho_count:{SU:0,MO:0,TU:0,WE:0,TH:0},wcheeseNacho_count:{SU:0,MO:0,TU:0,WE:0,TH:0},daysLeft:{chicken:0,cheese:0,bacon:0,chips:0}}},async mounted(){this.selectedWeek=this.$store.state.weeks.filter((e=>e[0]==this.$store.state.currWeek))[0],await this.compileSupply(),await this.fetchCosts(),await this.fetchInventory(),await this.historicalstats(),this.project()},methods:{onlyLettersAndNumbers(e){return e.replace(/[^a-z0-9A-Z ]+/gi," ")},async changeWeek(){this.myBarChart&&this.myBarChart.destroy(),await this.compileSupply(),await this.fetchCosts(),await this.fetchInventory(),await this.historicalstats()},async historicalstats(){var e=0,t=0,s=0,a=0,r=0,i=0;const l=await It.ZP.post("https://duncan-grille-api.azurewebsites.net/api/get-orders",{sql:"SELECT items from orders;"}),o=await It.ZP.post("https://duncan-grille-api.azurewebsites.net/api/get-orders",{sql:"SELECT items, order_day from orders;"}),n=await It.ZP.post("https://duncan-grille-api.azurewebsites.net/api/get-orders",{sql:"SELECT count(DISTINCT week_id) from orders where order_day='SU';"}),d=await It.ZP.post("https://duncan-grille-api.azurewebsites.net/api/get-orders",{sql:"SELECT count(DISTINCT week_id) from orders where order_day='MO';"}),c=await It.ZP.post("https://duncan-grille-api.azurewebsites.net/api/get-orders",{sql:"SELECT count(DISTINCT week_id) from orders where order_day='TU';"}),u=await It.ZP.post("https://duncan-grille-api.azurewebsites.net/api/get-orders",{sql:"SELECT count(DISTINCT week_id) from orders where order_day='WE';"}),h=await It.ZP.post("https://duncan-grille-api.azurewebsites.net/api/get-orders",{sql:"SELECT count(DISTINCT week_id) from orders where order_day='TH';"});var p={SU:0,MO:0,TU:0,WE:0,TH:0},m={SU:0,MO:0,TU:0,WE:0,TH:0},g={SU:0,MO:0,TU:0,WE:0,TH:0},w={SU:0,MO:0,TU:0,WE:0,TH:0},b={SU:0,MO:0,TU:0,WE:0,TH:0},y={SU:0,MO:0,TU:0,WE:0,TH:0};for(var f in o.data){var k=o.data[f][0];while(k%3==0)p[o.data[f][1]]+=1,k/=3}for(var f in o.data){k=o.data[f][0];while(k%5==0)m[o.data[f][1]]+=1,k/=5}for(var f in o.data){k=o.data[f][0];while(k%11==0)g[o.data[f][1]]+=1,k/=11}for(var f in o.data){k=o.data[f][0];while(k%7==0)w[o.data[f][1]]+=1,k/=7}for(var f in o.data){k=o.data[f][0];while(k%17==0)b[o.data[f][1]]+=1,k/=17}for(var f in o.data){k=o.data[f][0];while(k%13==0)y[o.data[f][1]]+=1,k/=13}for(var f in p["SU"]/=Number(n.data[0]),m["SU"]/=Number(n.data[0]),g["SU"]/=Number(n.data[0]),w["SU"]/=Number(n.data[0]),b["SU"]/=Number(n.data[0]),y["SU"]/=Number(n.data[0]),p["MO"]/=Number(d.data[0]),m["MO"]/=Number(d.data[0]),g["MO"]/=Number(d.data[0]),w["MO"]/=Number(d.data[0]),b["MO"]/=Number(d.data[0]),y["MO"]/=Number(d.data[0]),p["TU"]/=Number(c.data[0]),m["TU"]/=Number(c.data[0]),g["TU"]/=Number(c.data[0]),w["TU"]/=Number(c.data[0]),b["TU"]/=Number(c.data[0]),y["TU"]/=Number(c.data[0]),p["WE"]/=Number(u.data[0]),m["WE"]/=Number(u.data[0]),g["WE"]/=Number(u.data[0]),w["WE"]/=Number(u.data[0]),b["WE"]/=Number(u.data[0]),y["WE"]/=Number(u.data[0]),p["TH"]/=Number(h.data[0]),m["TH"]/=Number(h.data[0]),g["TH"]/=Number(h.data[0]),w["TH"]/=Number(h.data[0]),b["TH"]/=Number(h.data[0]),y["TH"]/=Number(h.data[0]),this.wdubbuff_count=p,this.wsinglebuff_count=m,this.wCBR_count=w,this.wsingleCBR_count=g,this.wchickenNacho_count=b,this.wcheeseNacho_count=y,l.data){k=l.data[f][0];while(k%3==0)e+=1,k/=3}for(var f in l.data){k=l.data[f][0];while(k%5==0)t+=1,k/=5}for(var f in l.data){k=l.data[f][0];while(k%11==0)s+=1,k/=11}for(var f in l.data){k=l.data[f][0];while(k%7==0)a+=1,k/=7}for(var f in l.data){k=l.data[f][0];while(k%17==0)r+=1,k/=17}for(var f in l.data){k=l.data[f][0];while(k%13==0)i+=1,k/=13}this.tdubbuff_count=e,this.tsinglebuff_count=t,this.tsingleCBR_count=s,this.tCBR_count=a,this.tchickenNacho_count=r,this.tcheeseNacho_count=i,this.totalChart([e,t,a,s,r,i])},async compileSupply(){var e=0,t=0,s=0,a=0,r=0,i=0;const l=await It.ZP.post("https://duncan-grille-api.azurewebsites.net/api/get-orders",{sql:`SELECT items from orders where week_id = ${this.selectedWeek[0]};`});for(var o in l.data){var n=l.data[o][0];while(n%3==0)e+=1,n/=3}for(var o in l.data){n=l.data[o][0];while(n%5==0)t+=1,n/=5}for(var o in l.data){n=l.data[o][0];while(n%11==0)s+=1,n/=11}for(var o in l.data){n=l.data[o][0];while(n%7==0)a+=1,n/=7}for(var o in l.data){n=l.data[o][0];while(n%17==0)r+=1,n/=17}for(var o in l.data){n=l.data[o][0];while(n%13==0)i+=1,n/=13}this.dubbuff_count=e,this.singlebuff_count=t,this.singleCBR_count=s,this.CBR_count=a,this.chickenNacho_count=r,this.cheeseNacho_count=i,this.barChart([e,t,s,a,r,i]),this.cheese=e+a+.5*s+.5*t+1.5*r+1.5*i,this.chicken=e+a+.5*s+.5*t+1.5*r+1.5*i,this.chips=r+i,this.bacon=a+.5*s,this.chickenUsage=Math.round(4*this.chicken/96),this.cheeseUsage=Math.round(this.cheese/15),this.chipsUsage=Math.round(this.chips/6),this.baconUsage=Math.round(this.bacon/11)},async project(){let e=["SU","MO","TU","WE","TH"],t=0,s=!1,a=this.chickenStorage,r=this.cheeseStorage,i=this.chipsStorage,l=this.baconStorage;while(!s){let o=e[t],n=this.wdubbuff_count[o]+this.wCBR_count[o]+.5*this.wsingleCBR_count[o]+.5*this.wsinglebuff_count[o]+1.5*this.wchickenNacho_count[o]+1.5*this.wcheeseNacho_count[o],d=this.wchickenNacho_count[o]+this.wcheeseNacho_count[o],c=this.wCBR_count[o]+.5*this.wsingleCBR_count[o];a-=4*n/96,r-=n/15,i-=d/6,l-=c/11;let u=0;a>0&&(u++,this.daysLeft.chicken++),r>0&&(u++,this.daysLeft.cheese++),i>0&&(u++,this.daysLeft.chips++),l>0&&(u++,this.daysLeft.bacon++),0==u&&(s=!0),t<4?t++:t=0}console.log(this.daysLeft)},async fetchInventory(){const e=await It.ZP.post("https://duncan-grille-api.azurewebsites.net/api/get-orders",{sql:"SELECT chicken,cheese,chips,bacon from inventory;"});0==e.data.length&&(this.inventoryExist=!1),this.chickenStorage=Number(e.data[0][0]),this.cheeseStorage=Number(e.data[0][1]),this.chipsStorage=Number(e.data[0][2]),this.baconStorage=Number(e.data[0][3])},async fetchCosts(){const e=await It.ZP.post("https://duncan-grille-api.azurewebsites.net/api/get-orders",{sql:`SELECT * from costs where week_id = ${this.selectedWeek[0]};`});this.weeklyCosts=e.data},async delStoreRun(e){await It.ZP.post("https://duncan-grille-api.azurewebsites.net/api/place-order",{sql:`delete from costs where cost_id = ${e}`});this.weeklyCosts=this.weeklyCosts.filter((t=>t[0]!=e))},async updateInventory(){let e=this.chickenStorage,t=this.chipsStorage,s=this.cheeseStorage,a=this.baconStorage;if(this.chickenInvenUpdate&&(e=this.chickenInvenUpdate),this.chipsInvenUpdate&&(t=this.chipsInvenUpdate),this.cheeseInvenUpdate&&(s=this.cheeseInvenUpdate),this.baconInvenUpdate&&(a=this.baconInvenUpdate),this.inventoryExist){const r=`UPDATE inventory SET chicken = ${e}, cheese = ${s}, chips= ${t},bacon=${a};`;console.log("Success");await It.ZP.post("https://duncan-grille-api.azurewebsites.net/api/place-order",{sql:r})}else{this.chickenInvenUpdate||(e=0),this.chipsInvenUpdate||(t=0),this.cheeseInvenUpdate||(s=0),this.baconInvenUpdate||(a=0);const r=`insert into inventory values (${e}, ${s}, ${t},${a});`;await It.ZP.post("https://duncan-grille-api.azurewebsites.net/api/place-order",{sql:r})}this.chickenStorage=e,this.chipsStorage=t,this.cheeseStorage=s,this.baconStorage=a,this.project(),alert("Successfully Updated Inventory!")},async addStoreRun(){const e=this.storeDate.split("-"),t=new Date(e[0],e[1]-1,e[2],-4,0,0,0).toISOString().slice(0,19).replace("T"," "),s=this.storeCost,a=this.onlyLettersAndNumbers(this.storeReason),r=`insert into costs (week_id, cost, date, reason) values (${this.selectedWeek[0]}, ${s}, '${t}', '${a}');`,i=(await It.ZP.post("https://duncan-grille-api.azurewebsites.net/api/place-order",{sql:r}),`SELECT * from costs where week_id = ${this.selectedWeek[0]} and date = '${t}' and cost = ${s} and reason = '${a}';`),l=await It.ZP.post("https://duncan-grille-api.azurewebsites.net/api/get-orders",{sql:i});this.weeklyCosts.push(l.data[0]),alert("Successfully Added Cost"),this.storeCost=null,this.storeReason=null,this.storeDate=null},barChart(e){const t=document.getElementById("myBarChart").getContext("2d"),s=["Dubbuffs","Singlebuffs","SingleCBRs","CBRs","Chicken Nachos","Cheese Nachos"];this.myBarChart=new yt.Z(t,{type:"bar",data:{labels:s,datasets:[{label:"Amount Purchased",data:e,backgroundColor:["red","orange","yellow","green","blue","purple","black"]}]}})},totalChart(e){const t=document.getElementById("TotalChart").getContext("2d"),s=["Dubbuffs","Singlebuffs","CBRs","SingleCBRs","Chicken Nachos","Cheese Nachos"];this.TotalChart=new yt.Z(t,{type:"bar",data:{labels:s,datasets:[{label:"Amount Purchased",data:e,backgroundColor:["red","orange","yellow","green","blue","purple","black"]}]}})}}};const kr=(0,R.Z)(fr,[["render",yr]]);var _r=kr,Cr=s.p+"img/Dubbuff.ee2392e0.jpg";const vr=e=>((0,r.dD)("data-v-2ddeabda"),e=e(),(0,r.Cn)(),e),Sr=(0,r.uE)('<h1 class="title" data-v-2ddeabda>Welcome to the Duncan Grille</h1><p style="color:white;" data-v-2ddeabda>Open Sunday-Thursday 10pm-12am </p><hr style="color:white;height:5px;margin-top:60px;" data-v-2ddeabda><h2 style="color:white;" data-v-2ddeabda>Our Menu</h2><div class="menu" data-v-2ddeabda><div style="float:right;" data-v-2ddeabda><div data-v-2ddeabda><p style="display:inline;" data-v-2ddeabda><b data-v-2ddeabda>Dubbuff - $5.00</b></p><p style="font-size:13px;display:inline;" data-v-2ddeabda> : Double Buffalo Chicken Quesadilla</p></div><div data-v-2ddeabda><p style="display:inline;" data-v-2ddeabda><b data-v-2ddeabda>Singlebuff - $3.00</b></p><p style="font-size:13px;display:inline;" data-v-2ddeabda> : Single Buffalo Chicken Quesadilla</p></div><div data-v-2ddeabda><p style="display:inline;" data-v-2ddeabda><b data-v-2ddeabda>CBR - $5.00</b></p><p style="font-size:13px;display:inline;" data-v-2ddeabda> : Double Chicken Bacon Ranch Quesadilla</p></div><div data-v-2ddeabda><p style="display:inline;" data-v-2ddeabda><b data-v-2ddeabda>Single CBR - $3.00</b></p><p style="font-size:13px;display:inline;" data-v-2ddeabda> : Single Chicken Bacon Ranch Quesadilla</p></div><div data-v-2ddeabda><p style="display:inline;" data-v-2ddeabda><b data-v-2ddeabda>Chicken Nachos - $3.50</b></p><p style="font-size:13px;display:inline;" data-v-2ddeabda></p></div><div data-v-2ddeabda><p style="display:inline;" data-v-2ddeabda><b data-v-2ddeabda>Cheese Nachos - $2.50</b></p><p style="font-size:13px;display:inline;" data-v-2ddeabda></p></div><div data-v-2ddeabda><p style="display:inline;" data-v-2ddeabda><b data-v-2ddeabda>Pizza Rolls - $0.25 per</b></p><p style="font-size:13px;display:inline;" data-v-2ddeabda></p></div><div data-v-2ddeabda><p style="display:inline;" data-v-2ddeabda><b data-v-2ddeabda>Soda/Gatorade - $1.50</b></p><p style="font-size:13px;display:inline;" data-v-2ddeabda></p></div><div data-v-2ddeabda><p style="display:inline;" data-v-2ddeabda><b data-v-2ddeabda>Ice Cream Sandwich - $1.50</b></p><p style="font-size:13px;display:inline;" data-v-2ddeabda></p></div></div></div><div class="food" style="display:inline-block;" data-v-2ddeabda><img src="'+Cr+'" class="image" style="float:left;" height="235" width="235" data-v-2ddeabda></div><hr style="color:white;height:5px;" data-v-2ddeabda>',7),Or=vr((()=>(0,r._)("p",{style:{display:"inline-block",color:"white","font-style":"normal"}},"or",-1))),Dr=vr((()=>(0,r._)("p",{style:{display:"inline-block",color:"white","font-style":"normal"}}," to order! ",-1)));function Er(e,t,s,a,i,l){return(0,r.wg)(),(0,r.iD)(r.HY,null,[Sr,(0,r._)("div",null,[(0,r._)("button",{class:"register",style:{display:"inline-block","margin-right":"15px","border-radius":"10px"},onClick:t[0]||(t[0]=t=>e.$router.push("/login"))},"Login"),Or,(0,r._)("button",{class:"register",style:{display:"inline-block","margin-left":"15px","margin-right":"15px","border-radius":"10px"},onClick:t[1]||(t[1]=t=>e.$router.push("/register"))},"Sign Up"),Dr])],64)}var zr={components:{PublicNavBar:K}};const Rr=(0,R.Z)(zr,[["render",Er],["__scopeId","data-v-2ddeabda"]]);var Tr=Rr;const Ir=(0,r._)("h3",{style:{color:"white"}},"Duncan Grille Sign Up",-1),$r=(0,r._)("label",null,"First Name: ",-1),Nr=(0,r._)("label",null,"Last Name: ",-1),xr=(0,r._)("label",null,"Email: ",-1),Ur=(0,r._)("label",null,"Password: ",-1),Br=(0,r._)("button",{class:"register"},"Sign Up",-1),Wr=(0,r._)("img",{src:"https://images.squarespace-cdn.com/content/v1/54dfd429e4b0549c366f98dd/1599506014278-OY3IXZWIHO6CRM7ZB6UO/5Q6A9980.jpg?format=2500w",alt:"DuncanHall"},null,-1);function Hr(e,t,s,i,l,o){return(0,r.wg)(),(0,r.iD)(r.HY,null,[Ir,(0,r._)("form",{onSubmit:t[4]||(t[4]=(0,a.iM)(((...e)=>i.register&&i.register(...e)),["prevent"])),class:"signupForm"},[$r,(0,r.wy)((0,r._)("input",{type:"text",required:"","onUpdate:modelValue":t[0]||(t[0]=e=>i.signup_form.first_name=e)},null,512),[[a.nr,i.signup_form.first_name]]),Nr,(0,r.wy)((0,r._)("input",{type:"text",required:"","onUpdate:modelValue":t[1]||(t[1]=e=>i.signup_form.last_name=e)},null,512),[[a.nr,i.signup_form.last_name]]),xr,(0,r.wy)((0,r._)("input",{type:"email",required:"","onUpdate:modelValue":t[2]||(t[2]=e=>i.signup_form.email=e)},null,512),[[a.nr,i.signup_form.email]]),Ur,(0,r.wy)((0,r._)("input",{type:"password","onUpdate:modelValue":t[3]||(t[3]=e=>i.signup_form.password=e),required:""},null,512),[[a.nr,i.signup_form.password]]),Br],32),Wr],64)}var Mr={setup(){const e=(0,ts.iH)({}),t=(0,u.oR)(),s=()=>{let s=e.value.email.slice(-7);"@nd.edu"!==s?(alert("You are not permitted to make an account."),e.value.email="",e.value.name="",e.value.password=""):(e.value.name=e.value.first_name+" "+e.value.last_name,t.dispatch("register",e.value))};return{signup_form:e,register:s}}};const Pr=(0,R.Z)(Mr,[["render",Hr]]);var Fr=Pr,qr=s.p+"img/grille_boys.2173c407.jpg";const Zr={style:{color:"#f8f8f8"}},Lr=(0,r.uE)('<hr><h1>Online Ordering Policy:</h1><li>Online Ordering hours: <b><u>Sun - Thurs from 10:05pm - 11:45pm</u></b></li><li>Online Orders have a <b><u>$0.50 fee</u></b></li><li>Please <b><u>Venmo @DuncanGrille</u></b> the total listed</li><li>You will recieve an email when your order is done</li><li>CBR</li><div style="width:49%;float:left;margin-right:0.5%;"><img src="'+qr+'" alt="" style="float:right;" width="300" height="300"></div><div style="width:49%;float:right;margin-left:0.5%;"><img src="https://images.squarespace-cdn.com/content/v1/54dfd429e4b0549c366f98dd/1441391694273-GK2IJEZSPW4WPH1U0BBF/Ducnan+Hall+CBR.png?format=1500w" alt="" width="300" height="300" style="float:left;"></div>',9),Ar={key:0,style:{color:"green"}},jr={key:1,style:{color:"red"}},Vr={key:2,style:{color:"red"}};function Kr(e,t,s,a,i,l){const o=(0,r.up)("CustomerOrderModal");return(0,r.wg)(),(0,r.iD)(r.HY,null,[i.showOrderModal?((0,r.wg)(),(0,r.j4)(o,{key:0,onClose:l.toggleOrderModal,onSuccess:l.toggleSuccess},null,8,["onClose","onSuccess"])):(0,r.kq)("",!0),(0,r._)("div",Zr,[(0,r._)("h3",null,"Welcome to the Grille, "+(0,Ee.zw)(this.$store.state.customerBaseInd[this.$store.state.custId][2]),1),Lr,(0,r._)("button",{onClick:t[0]||(t[0]=(...e)=>l.toggleOrderModal&&l.toggleOrderModal(...e)),disabled:!1,class:"register"},"New Online Order"),i.success?((0,r.wg)(),(0,r.iD)("p",Ar,"Your order was submitted successfully!")):(0,r.kq)("",!0),(i.currentTime.getHours()<22||22==i.currentTime.getHours()&&i.currentTime.getMinutes()<5||23==i.currentTime.getHours()&&i.currentTime.getMinutes()>44)&&i.dayOfWeek<5?((0,r.wg)(),(0,r.iD)("p",jr," Online Orders can only be placed from 10:05pm - 11:45pm ")):(0,r.kq)("",!0),i.dayOfWeek>4?((0,r.wg)(),(0,r.iD)("p",Vr,"The Grille is not open today. We are open Sun - Thurs")):(0,r.kq)("",!0)])],64)}const Gr={style:{display:"inline"}},Yr={style:{display:"inline"}},Qr=(0,r._)("hr",null,null,-1),Jr={key:0},Xr=(0,r._)("hr",null,null,-1),ei=(0,r._)("p",{style:{}},"Items (click to delete)",-1),ti=["onClick"],si=(0,r._)("hr",null,null,-1),ai=(0,r._)("hr",null,null,-1),ri=(0,r._)("hr",null,null,-1),ii=["disabled"];function li(e,t,s,i,l,o){return(0,r.wg)(),(0,r.iD)("div",{class:"new-backdrop",onClick:t[18]||(t[18]=(0,a.iM)(((...e)=>o.closeModal&&o.closeModal(...e)),["self"]))},[(0,r._)("div",{class:"new-modal",onClick:t[17]||(t[17]=(0,a.iM)((e=>l.toggleQuantity=!1),["self"]))},[(0,r._)("div",Gr,[(0,r._)("h1",Yr,(0,Ee.zw)(this.$store.state.customerBaseInd[this.$store.state.custId][2])+"'s Order",1),(0,r._)("button",{onClick:t[0]||(t[0]=(...e)=>o.closeModal&&o.closeModal(...e)),type:"button",style:{display:"inline",float:"right"},class:"btn-close pull-right","aria-label":"Close"})]),Qr,(0,r._)("button",{style:{background:"green","margin-right":"50px"},onClick:t[1]||(t[1]=e=>o.addItem("DubBuff"))},"DubBuff"),(0,r._)("button",{style:{background:"red","margin-right":"50px"},onClick:t[2]||(t[2]=e=>o.addItem("SingleBuff"))},"SingleBuff"),(0,r._)("button",{style:{background:"#47ad64","margin-right":"50px"},onClick:t[3]||(t[3]=e=>o.addItem("DubBuff - HS"))},"DubBuff - HS"),(0,r._)("button",{style:{background:"#9e4f4f","margin-right":"50px"},onClick:t[4]||(t[4]=e=>o.addItem("SingleBuff - HS"))},"SingleBuff - HS"),(0,r._)("button",{style:{"margin-right":"50px"},onClick:t[5]||(t[5]=e=>o.addItem("CBR"))},"CBR"),(0,r._)("button",{style:{background:"black","margin-right":"50px"},onClick:t[6]||(t[6]=e=>o.addItem("Single CBR"))},"Single CBR"),(0,r._)("button",{style:{background:"#918e2d","margin-right":"50px"},onClick:t[7]||(t[7]=e=>o.addItem("Chicken Nachos"))},"Chicken Nachos"),(0,r._)("button",{style:{background:"#2d7691","margin-right":"50px"},onClick:t[8]||(t[8]=e=>o.addItem("Cheese Nachos"))},"Cheese Nachos"),(0,r._)("button",{style:{background:"#9b5f96","margin-right":"50px"},onClick:t[9]||(t[9]=e=>l.toggleQuantity=!l.toggleQuantity)},"Pizza Rolls"),(0,r._)("button",{style:{background:"#571e59","margin-right":"50px"},onClick:t[10]||(t[10]=e=>o.addItem("Soda/Gatorade"))},"Soda/Gatorade"),(0,r._)("button",{style:{background:"#1e5931","margin-right":"50px"},onClick:t[11]||(t[11]=e=>o.addItem("Ice Cream Sandwich"))},"Ice Cream Sandwich"),l.toggleQuantity?((0,r.wg)(),(0,r.iD)("hr",Jr)):(0,r.kq)("",!0),l.toggleQuantity?(0,r.wy)(((0,r.wg)(),(0,r.iD)("input",{key:1,type:"number",placeholder:"Quantity:",onInput:t[12]||(t[12]=(...e)=>o.addPizzaRolls&&o.addPizzaRolls(...e)),"onUpdate:modelValue":t[13]||(t[13]=e=>l.pizzaRolls=e),onFocus:t[14]||(t[14]=e=>l.toggleQuantity=!0)},null,544)),[[a.nr,l.pizzaRolls]]):(0,r.kq)("",!0),Xr,ei,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.currentOrder.items,(e=>((0,r.wg)(),(0,r.iD)("div",{key:e,class:"pill"},[(0,r._)("span",{onClick:t=>o.delItem(e)},(0,Ee.zw)(e),9,ti)])))),128)),si,(0,r.wy)((0,r._)("input",{type:"text",placeholder:"Comments (optional)","onUpdate:modelValue":t[15]||(t[15]=e=>l.currentOrder.comments=e)},null,512),[[a.nr,l.currentOrder.comments]]),ai,(0,r._)("h2",null,"Ticket Total: $"+(0,Ee.zw)(Number(l.currentOrder.price).toFixed(2)),1),ri,(0,r._)("button",{disabled:!l.currentOrder.price,onClick:t[16]||(t[16]=(...e)=>o.submitOrder&&o.submitOrder(...e))},"Submit Order",8,ii)])])}s(689);var oi={methods:{closeModal(){this.$emit("close")},addItem(e){switch(this.currentOrder.items.push(e),e){case"DubBuff":this.currentOrder.price+=5;break;case"SingleBuff":this.currentOrder.price+=3;break;case"DubBuff - HS":this.currentOrder.price+=5;break;case"SingleBuff - HS":this.currentOrder.price+=3;break;case"CBR":this.currentOrder.price+=5;break;case"Cheese Nachos":this.currentOrder.price+=2.5;break;case"Chicken Nachos":this.currentOrder.price+=3.5;break;case"Single CBR":this.currentOrder.price+=3;break;case"Soda/Gatorade":this.currentOrder.price+=1.5;break;case"Ice Cream Sandwich":this.currentOrder.price+=1.5;break}},delItem(e){switch(e){case"DubBuff":this.currentOrder.price-=5;break;case"SingleBuff":this.currentOrder.price-=3;break;case"DubBuff - HS":this.currentOrder.price-=5;break;case"SingleBuff - HS":this.currentOrder.price-=3;break;case"CBR":this.currentOrder.price-=5;break;case"Cheese Nachos":this.currentOrder.price-=2.5;break;case"Chicken Nachos":this.currentOrder.price-=3.5;break;case"Single CBR":this.currentOrder.price-=3;break;case"Soda/Gatorade":this.currentOrder.price-=1.5;break;case"Ice Cream Sandwich":this.currentOrder.price-=1.5;break;default:this.currentOrder.price-=.25*this.pizzaRolls,this.pizzaRolls=0,this.toggleQuantity=0;break}const t=this.currentOrder.items.indexOf(e);this.currentOrder.items.splice(t,1)},addPizzaRolls(){let e=this.currentOrder.items.find((e=>/^([0-9]*) (Pizza Rolls)$/.test(e)));if(e){const t=this.currentOrder.items.indexOf(e),s=Number(this.currentOrder.items[t].slice(0,-11));this.currentOrder.price-=.25*s,this.currentOrder.items.splice(t,1)}this.pizzaRolls>0&&(this.currentOrder.items.push(`${this.pizzaRolls} Pizza Rolls`),this.currentOrder.price+=.25*this.pizzaRolls)},onlyLettersAndNumbers(e){return e.replace(/[^a-z0-9A-Z ]+/gi," ")},async submitOrder(){this.$emit("success"),this.currentOrder.comments=this.onlyLettersAndNumbers(this.currentOrder.comments);let e=new Date;this.currentOrder.time=e.toLocaleTimeString();let t=this.currentOrder;this.insertOrder(t.price,this.encodeOrders(t.items),t.custId,this.$store.state.currDay,this.$store.state.currWeek,t.cash,t.online,t.done,t.comments)},async insertOrder(e,t,s,a,r,i,l,o,n){let d=new Date;const c=`INSERT INTO orders (price, items, order_time, order_day, order_datetime, week_id, cust_id, cash, online, done, comments) values (${e}, ${t},"${d.toLocaleTimeString()}", "${a}", "${this.formatDate(d)}", ${r}, ${s}, ${i}, ${l}, ${o}, "${n}");`;try{console.log(c),await It.ZP.post("https://duncan-grille-api.azurewebsites.net/api/place-order",{sql:c}),this.$store.dispatch("onlineTrigger")}catch(u){console.log(c),console.log(u)}await this.$store.dispatch("getOrdersByDay")},formatDate(e){return`${e.getFullYear()}-${e.getMonth()+1}-${e.getDate()} ${e.getHours()>=10?e.getHours():"0"+e.getHours()}:${e.getMinutes()>=10?e.getMinutes():"0"+e.getMinutes()}:${e.getSeconds()>=10?e.getSeconds():"0"+e.getSeconds()}`},encodeOrders(e){let t={pizza:2,dubbuff:3,singlebuff:5,cbr:7,single:11,cheese:13,chicken:17,"soda/gatorade":19,ice:23},s=1;for(let a=0;a<e.length;a++)if(e[a].includes("Pizza")){let t=e[a].split(" ");s*=Math.pow(2,Number(t[0]))}else{let r=e[a].split(" ")[0];s*=t[r.toLowerCase()]}return s}},data(){return{currentOrder:{custId:this.$store.state.custId,items:[],comments:"",price:.5,date:new Date,time:null,done:!1,cash:!1,online:!0},dayOfWeek:(new Date).getDay(),currentTime:new Date,toggleQuantity:!1,pizzaRolls:null}}};const ni=(0,R.Z)(oi,[["render",li]]);var di=ni,ci={created(){this.$store.dispatch("setCustId")},data(){return{showOrderModal:!1,currentTime:new Date,dayOfWeek:(new Date).getDay(),success:!1}},methods:{toggleOrderModal(){this.showOrderModal=!this.showOrderModal},toggleSuccess(){this.showOrderModal=!this.showOrderModal,alert("Successfully submitted order! Please Venmo @DuncanGrille"),this.success=!0}},components:{CustomerOrderModal:di}};const ui=(0,R.Z)(ci,[["render",Kr]]);var hi=ui;const pi=e=>((0,r.dD)("data-v-66686684"),e=e(),(0,r.Cn)(),e),mi=pi((()=>(0,r._)("h3",null,"Past Orders",-1))),gi=pi((()=>(0,r._)("hr",null,null,-1))),wi={style:{float:"left",width:"30%","margin-left":"20px"}},bi=pi((()=>(0,r._)("p",null,"Select Week",-1))),yi={key:0,class:"listContainer"},fi={style:{"padding-left":"0px"}},ki=["onClick"],_i={style:{float:"left",width:"20%","margin-left":"5%"}},Ci=pi((()=>(0,r._)("p",null,"Select Day",-1))),vi={class:"listContainer"},Si={style:{"padding-left":"0px"}},Oi=["onClick"],Di={style:{float:"left",width:"37%","margin-left":"5%"}},Ei=pi((()=>(0,r._)("p",null,"Select Name",-1))),zi={class:"listContainer"},Ri={key:0,class:"listContainer"},Ti={style:{"padding-left":"0px"}},Ii=["onClick"],$i={style:{float:"right",width:"100%","margin-right":"15px","margin-top":"20px"}},Ni={key:0},xi=(0,r.Uk)("Search For: "),Ui={key:0},Bi=(0,r.Uk)(),Wi={key:1},Hi=(0,r.Uk)(),Mi={key:2},Pi=["disabled"],Fi={key:0,class:"table"},qi=pi((()=>(0,r._)("thead",null,[(0,r._)("tr",null,[(0,r._)("th",{scope:"col"},"#"),(0,r._)("th",{scope:"col"},"$"),(0,r._)("th",{scope:"col"},"Type"),(0,r._)("th",{scope:"col"},"Date"),(0,r._)("th",{scope:"col"},"Time"),(0,r._)("th",{scope:"col"},"Name"),(0,r._)("th",{scope:"col"},"Order"),(0,r._)("th",{scope:"col"},"Comments"),(0,r._)("th",{scope:"col"},"Price")])],-1))),Zi={scope:"row"},Li={key:0},Ai={key:1},ji={style:{"word-wrap":"break-word","max-width":"400px"}},Vi={key:2},Ki={key:3},Gi={key:1,style:{"margin-top":"20px"}};function Yi(e,t,s,i,l,o){const n=(0,r.up)("fa");return(0,r.wg)(),(0,r.iD)(r.HY,null,[mi,gi,(0,r._)("div",wi,[bi,this.$store.state.weeks?((0,r.wg)(),(0,r.iD)("div",yi,[(0,r._)("ul",fi,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(this.$store.state.weeks,(e=>((0,r.wg)(),(0,r.iD)("li",{onClick:t=>o.setWeek(e),class:(0,Ee.C_)({selected:o.isSelectedWeek(e)})},"Week of "+(0,Ee.zw)(e[1].split(" ")[0]),11,ki)))),256))])])):(0,r.kq)("",!0)]),(0,r._)("div",_i,[Ci,(0,r._)("div",vi,[(0,r._)("ul",Si,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.daysOfWeek,(e=>((0,r.wg)(),(0,r.iD)("li",{onClick:t=>o.setDay(e),class:(0,Ee.C_)({selected:o.isSelectedDay(e)})},(0,Ee.zw)(e),11,Oi)))),256))])])]),(0,r._)("div",Di,[Ei,(0,r._)("div",zi,[(0,r.wy)((0,r._)("input",{type:"text",class:"nameInput",id:"nameInput",placeholder:"Name (First and Last)","onUpdate:modelValue":t[0]||(t[0]=e=>l.name=e),autocomplete:"off",onInput:t[1]||(t[1]=(...e)=>o.filterCustomers&&o.filterCustomers(...e)),onFocus:t[2]||(t[2]=e=>l.modal=!0)},null,544),[[a.nr,l.name]]),l.filteredCustomers&&l.modal?((0,r.wg)(),(0,r.iD)("div",Ri,[(0,r._)("ul",Ti,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.filteredCustomers,(e=>((0,r.wg)(),(0,r.iD)("li",{class:(0,Ee.C_)(["listItem",{selected:o.isSelectedCustomer(e)}]),onClick:t=>o.setCustomer(e)},(0,Ee.zw)(e),11,Ii)))),256))])])):(0,r.kq)("",!0)])]),(0,r._)("div",$i,[this.selectedWeek||this.selectedDay||this.name?((0,r.wg)(),(0,r.iD)("p",Ni,[xi,l.selectedWeek?((0,r.wg)(),(0,r.iD)("p",Ui,"Week of "+(0,Ee.zw)(l.selectedWeek[1].split(" ")[0])+":",1)):(0,r.kq)("",!0),Bi,l.selectedDay?((0,r.wg)(),(0,r.iD)("p",Wi,"Day: "+(0,Ee.zw)(l.selectedDay),1)):(0,r.kq)("",!0),Hi,l.name?((0,r.wg)(),(0,r.iD)("p",Mi,"Customer: "+(0,Ee.zw)(l.name),1)):(0,r.kq)("",!0)])):(0,r.kq)("",!0),(0,r._)("button",{style:{width:"80%"},onClick:t[3]||(t[3]=e=>o.fetchOrders()),disabled:!(this.selectedWeek||this.selectedDay||this.name)},"Get Orders",8,Pi)]),this.orders?((0,r.wg)(),(0,r.iD)("table",Fi,[qi,(0,r._)("tbody",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(this.orders,((e,t)=>((0,r.wg)(),(0,r.iD)("tr",{class:(0,Ee.C_)({online:"1"==e[9]&&"0"==e[10],completed:"1"==e[10]})},[(0,r._)("th",Zi,(0,Ee.zw)(t+1),1),(0,r._)("td",null,["1"==e[8]?((0,r.wg)(),(0,r.j4)(n,{key:0,icon:"money-bill",style:{color:"green"}})):((0,r.wg)(),(0,r.j4)(n,{key:1,icon:"v",style:{color:"blue"}}))]),(0,r._)("td",null,["1"==e[9]?((0,r.wg)(),(0,r.j4)(n,{key:0,icon:"computer",style:{color:"black"}})):((0,r.wg)(),(0,r.j4)(n,{key:1,icon:"people-arrows"}))]),(0,r._)("td",null,(0,Ee.zw)(e[5].split(" ")[0]),1),(0,r._)("td",null,(0,Ee.zw)(e[3]),1),"None"==e[7]?((0,r.wg)(),(0,r.iD)("td",Li,"Customer")):((0,r.wg)(),(0,r.iD)("td",Ai,(0,Ee.zw)(this.$store.state.customerBaseInd[e[7]][2]),1)),(0,r._)("td",null,(0,Ee.zw)(o.decodeOrder(e[2])),1),(0,r._)("td",ji,(0,Ee.zw)(e[11]),1),"0"==e[9]?((0,r.wg)(),(0,r.iD)("td",Vi,"$"+(0,Ee.zw)(Number(e[1]).toFixed(2)),1)):((0,r.wg)(),(0,r.iD)("td",Ki,"$"+(0,Ee.zw)(Number(e[1]-.5).toFixed(2)),1)),(0,r._)("td",null,[(0,r.Wm)(n,{icon:"check-to-slot",onClick:t=>o.toggleDone(e),style:{color:"green",cursor:"pointer"}},null,8,["onClick"])]),(0,r._)("td",null,[(0,r.Wm)(n,{icon:"trash-can",onClick:t=>o.toggleDel(e),style:{color:"red",cursor:"pointer"}},null,8,["onClick"])])],2)))),256))])])):(0,r.kq)("",!0),this.price?((0,r.wg)(),(0,r.iD)("h2",Gi,"Search Price Total: $"+(0,Ee.zw)(Number(l.price).toFixed(2)),1)):(0,r.kq)("",!0)],64)}var Qi={data(){return{daysOfWeek:["SU","MO","TU","WE","TH"],selectedDay:null,selectedWeek:null,selectedCustomer:null,orders:null,name:null,customers:this.$store.state.customerBase,filteredCustomers:null,modal:!1,custId:null,price:null}},mounted(){this.filterCustomers()},methods:{filterCustomers(){let e=this.name;this.filteredCustomers=e?this.customers.map((e=>e[2])).filter((t=>t.toLowerCase().includes(e.toLowerCase()))):this.customers.map((e=>e[2]))},setCustomer(e){this.name!=e?this.name=e:this.name=null,this.modal=!1},setDay(e){this.selectedDay!=e?this.selectedDay=e:this.selectedDay=null},setWeek(e){this.selectedWeek!=e?this.selectedWeek=e:this.selectedWeek=null},isSelectedWeek(e){if(this.selectedWeek==e)return!0},isSelectedDay(e){if(this.selectedDay==e)return!0},isSelectedCustomer(e){if(this.name==e)return!0},async fetchOrders(){var e=[],t="";const s=this.customers.filter((e=>e[2]==this.name));0!=s.length?this.custId=Number(s[0][0]):this.custId=155,this.selectedDay&&e.push(`order_day = '${this.selectedDay}' `),this.selectedWeek&&e.push(`week_id = ${this.selectedWeek[0]} `),this.name&&e.push(`cust_id = ${this.custId} `);for(var a=0;a<e.length;a++)a==e.length-1?t+=e[a]:t+=e[a]+"and ";const r=`SELECT * from orders where ${t} order by order_datetime asc;`,i=await It.ZP.post("https://duncan-grille-api.azurewebsites.net/api/get-orders",{sql:r});this.orders=i.data,this.price=this.orders.map((e=>"0"==e[9]?Number(e[1]).toFixed(2):Number(e[1]-.5).toFixed(2))),this.price=this.price.reduce(((e,t)=>Number(e)+Number(t)))},decodeOrder(e){let t={2:"pizza",3:"Dubbuff",5:"Singlebuff",7:"CBR",11:"Single CBR",13:"Cheese Nachos",17:"Chicken Nachos",19:"Soda/Gatorade",23:"Ice Cream"},s=[],a=0;while(e%2==0)e/=2,a++;a&&s.push(`${a} Pizza Rolls`);for(const r in t)if(2!=r)while(e%r==0)s.push(t[r]),e/=r;return s.join(", ")},async toggleDel(e){const t=`delete from orders where id = ${e[0]}`;await It.ZP.post("https://duncan-grille-api.azurewebsites.net/api/place-order",{sql:t}),this.orders=this.orders.filter((t=>t[0]!=e[0]))},async toggleDone(e){"1"==e[10]?e[10]="0":e[10]="1";const t=`UPDATE orders set done = ${e[10]} where id = ${e[0]}`;await It.ZP.post("https://duncan-grille-api.azurewebsites.net/api/place-order",{sql:t})}}};const Ji=(0,R.Z)(Qi,[["render",Yi],["__scopeId","data-v-66686684"]]);var Xi=Ji;function el(e){return e.replace(/[^a-z0-9A-Z ]+/gi," ")}const tl=async e=>{await e.dispatch("getCustomerBase"),e.commit("SET_CUST_ID",Number(e.state.customerBase.filter((t=>t[1]==e.state.user.email))[0][0]))},sl=async(e,t)=>{const{email:s,password:a}=t;try{await(0,ne.e5)(ue,s,a),e.commit("SET_CUST_ID",Number(e.state.customerBase.filter((e=>e[1]==s))[0][0]))}catch(r){switch(r.code){case"auth/invalid-email":alert("Invalid email");break;case"auth/user-not-found":alert("You are not an authorized user");break;case"auth/wrong-password":alert("Incorrect password or email");break}return}await e.dispatch("getRole"),e.state.employeeRole?(e.commit("SET_LOGGED_IN",ue.currentUser),to.push("/finances")):(e.commit("SET_LOGGED_IN",ue.currentUser),to.push("/customer"))},al=async(e,t)=>{const{name:s,email:a,password:r}=t;var i;i=s.replace(";",""),i=s.replace('"',"");const l=i;try{await(0,ne.Xb)(ue,a,r)}catch(n){switch(n.code){case"auth/email-already-in-use":alert("Email already in use!");break;case"auth/invalid-email":alert("Invalid email");break;case"auth/weak-password":alert("Weak password");break}return}var o=`Insert into customers (email, cust_name, employee) values ('${a}', '${l}', 0);`;It.ZP.post("https://duncan-grille-api.azurewebsites.net/api/place-order",{sql:o});e.commit("SET_LOGGED_IN",ue.currentUser),to.push("/customer"),await(0,le.pl)((0,le.JU)(he,"auth",e.state.user.email),{name:s}),await(0,le.pl)((0,le.JU)(he,"customers",l),{email:e.state.user.email}),e.dispatch("setCustId")},rl=async e=>{await(0,ne.w7)(ue),e.commit("CLEAR_USER"),to.push("/")},il=async(e,t)=>{ue.onAuthStateChanged((async t=>{null==t?e.commit("CLEAR_USER"):(e.commit("SET_LOGGED_IN",t),await e.dispatch("getRole"),await e.dispatch("getWeeksSQL"),await e.dispatch("getCustomerBase"),e.state.employeeRole?to.push("/finances"):to.push("/customer"))}))},ll=async e=>{const t=await(0,le.QT)((0,le.JU)(he,"auth",e.state.user.email));t.exists()&&t.data().employee?e.commit("SET_EMPLOYEE_ROLE",{s:!0,n:t.data().name}):e.commit("SET_EMPLOYEE_ROLE",{s:!1,n:t.data().name})},ol=async e=>{const t=await It.ZP.post("https://duncan-grille-api.azurewebsites.net/api/get-orders",{sql:"SELECT * from customers where employee = 1;"});e.commit("SET_EMPLOYEES",t.data)},nl=async(e,t)=>{let s=t.id,a=t.hours;await It.ZP.post("https://duncan-grille-api.azurewebsites.net/api/place-order",{sql:`INSERT INTO hours values(${e.state.currWeek}, ${s}, ${a});`})},dl=async e=>{let t=new Date,s=`${t.getFullYear()}-${t.getMonth()+1}-${t.getDate()} ${t.getHours()>=10?t.getHours():"0"+t.getHours()}:${t.getMinutes()>=10?t.getMinutes():"0"+t.getMinutes()}:${t.getSeconds()>=10?t.getSeconds():"0"+t.getSeconds()}`,a=await It.ZP.post("https://duncan-grille-api.azurewebsites.net/api/get-orders",{sql:'SELECT * from weeks where "'+s+'" between start_date and end_date;'});if(0==a.data.length){console.log("Inserting new week");let e=new Date,r=new Date;e.setDate(t.getDate()-t.getDay()),r.setDate(e.getDate()+6),e.setHours(-5),e.setMinutes(0),e.setSeconds(0),r.setHours(18),r.setMinutes(59),r.setSeconds(59),await It.ZP.post("https://duncan-grille-api.azurewebsites.net/api/place-order",{sql:`INSERT INTO weeks (start_date, end_date) values( "${e.toISOString().slice(0,19).replace("T"," ")}", "${r.toISOString().slice(0,19).replace("T"," ")}")`}),a=await It.ZP.post("https://duncan-grille-api.azurewebsites.net/api/get-orders",{sql:'SELECT * from weeks where "'+s+'" between start_date and end_date;'})}console.log(a.data[0][0]),e.commit("SET_CURR_WEEK",Number(a.data[0][0])),e.commit("SET_SEL_WEEK",Number(a.data[0][0]));let r=new Date;if(r.getDay()>4){let e=new Date,s=new Date;e.setDate(t.getDate()+7-t.getDay()),s.setDate(e.getDate()+6),e.setHours(-5),e.setMinutes(0),e.setSeconds(0),s.setHours(18),s.setMinutes(59),s.setSeconds(59);let a=await It.ZP.post("https://duncan-grille-api.azurewebsites.net/api/get-orders",{sql:`SELECT * from weeks where start_date = '${e.toISOString().slice(0,19).replace("T"," ")}';`});0==a.data.length&&(console.log("Inserting new week"),await It.ZP.post("https://duncan-grille-api.azurewebsites.net/api/place-order",{sql:`INSERT INTO weeks (start_date, end_date) values( "${e.toISOString().slice(0,19).replace("T"," ")}", "${s.toISOString().slice(0,19).replace("T"," ")}")`}))}const i=await It.ZP.post("https://duncan-grille-api.azurewebsites.net/api/get-orders",{sql:"SELECT * from weeks order by start_date desc;"}),l=[];for(let d=0;d<i.data.length;d++)l.push([i.data[d][0],i.data[d][1]]);e.commit("SET_WEEKS",l);let o=null;o=t.getHours()<5?t.getDay()-1:t.getDay();let n=["SU","MO","TU","WE","TH","FR","SA"];e.commit("SET_CURR_DAY",n[o])},cl=(e,t)=>{e.commit("SELECT_WEEK",t)},ul=async e=>{var t={};const s=`SELECT day_of_week, total_revenue, cash_revenue, venmo_revenue, date, online_fee FROM nightly_stats WHERE week_id = ${e.state.selWeek}`,a=`select cost, date, reason from costs where week_id = ${e.state.selWeek}`,r=`SELECT cust_name from hours H, customers C where H.week_id = ${e.state.selWeek} and employee_id = id group by H.employee_id`,i=`SELECT sum(hours_worked) from hours H, customers C where H.week_id = ${e.state.selWeek} and employee_id = id group by H.employee_id`,l=`select day_of_week, w1,w2,w3 from schedule where week_id = ${e.state.selWeek}`,o=await It.ZP.post("https://duncan-grille-api.azurewebsites.net/api/get-orders",{sql:s}),n=await It.ZP.post("https://duncan-grille-api.azurewebsites.net/api/get-orders",{sql:a}),d=await It.ZP.post("https://duncan-grille-api.azurewebsites.net/api/get-orders",{sql:r}),c=await It.ZP.post("https://duncan-grille-api.azurewebsites.net/api/get-orders",{sql:i}),u=await It.ZP.post("https://duncan-grille-api.azurewebsites.net/api/get-orders",{sql:l}),h=o.data,p=n.data,m=c.data,g=d.data;var w=u.data;if(0==w.length){w=[["SU","-","-","-"],["MO","-","-","-"],["TU","-","-","-"],["WE","-","-","-"],["TH","-","-","-"]];for(var b=0;b<w.length;b++){var y=`INSERT into schedule (week_id,day_of_week,w1,w2,w3) values (${e.state.selWeek}, '${w[b][0]}', '${w[b][1]}', '${w[b][2]}', '${w[b][3]}');`;console.log(y),await It.ZP.post("https://duncan-grille-api.azurewebsites.net/api/place-order",{sql:y})}}let f=[],k=[],_=[];var C=0,v=0,S=0,O=0;for(b=0;b<h.length;b++)t[h[b][0]]=[h[b][1],h[b][2],h[b][3]],O+=Number(h[b][5]),f.push(h[b][4].split(" ")[0]),k.push(h[b][3]),_.push(h[b][2]);for(b=0;b<h.length;b++)C+=Number(t[h[b][0]][0]),v+=Number(t[h[b][0]][1]),S+=Number(t[h[b][0]][2]);var D=0;for(b=0;b<p.length;b++)D+=Number(p[b][0]);var E=m.reduce(((e,t)=>e+Number(t)),0),z=Number((.9*(C-D)/E).toFixed(2));console.log(m,g);var R=[];for(b=0;b<m.length;b++)R.push(`${g[b]} : ${m[b]}`);var T=m.map((function(e){return e*z}));e.commit("SET_WEEK_DATA",t),e.commit("SET_WEEK_COSTS",p),e.commit("SET_TOTAL_REV",C),e.commit("SET_CASH_REV",v),e.commit("SET_VENMO_REV",S),e.commit("SET_COST",D),e.commit("SET_WEEK_FEE",O),e.commit("SET_CHART_DATA",{l:f,v:k,c:_}),e.commit("SET_WORKER_HOURS",{wH:T,w:g,tH:E}),e.commit("SET_WAGE",z),e.commit("SET_WORKING_E",w),e.commit("SET_HOUR_LABELS",R)},hl=async e=>{const t=`SELECT * from orders where week_id = ${e.state.currWeek} and order_day = '${e.state.currDay}' order by order_datetime asc`,s=await It.ZP.post("https://duncan-grille-api.azurewebsites.net/api/get-orders",{sql:t});let a=s.data;e.dispatch("commitOrders",{o:a})},pl=async(e,t)=>{const s=t.id,a=`SELECT * from orders where id = ${s};`,r=await It.ZP.post("https://duncan-grille-api.azurewebsites.net/api/get-orders",{sql:a});let i=r.data;e.commit("SET_EDIT_ORDER",i[0])},ml=async(e,t)=>{let s=t.o,a=0,r=0;for(let i=0;i<s.length;i++)a+=Number(s[i][1]),"1"==s[i][9]&&(r+=.5,a-=.5);e.commit("SET_ORDERS",{o:s,t:a,of:r}),await e.dispatch("updateDaily")},gl=async(e,t)=>{let s=t.id;const a=`delete from orders where id = ${s}`;await It.ZP.post("https://duncan-grille-api.azurewebsites.net/api/place-order",{sql:a});let r=e.state.orders.filter((e=>e[0]!=s));e.dispatch("commitOrders",{o:r})},wl=async(e,t)=>{const s=Number(t.order[0]),a=t.order[7],r=t.order[2],i=el(t.order[11]),l=t.order[8],o=t.order[1],n=`UPDATE orders set done = 0, cust_id = ${a}, items = ${r}, comments = '${i}', cash = ${l}, price = ${o} where id = ${s}`;await It.ZP.post("https://duncan-grille-api.azurewebsites.net/api/place-order",{sql:n}),e.dispatch("getOrdersByDay")},bl=async(e,t)=>{let s=t.order;"1"==s[10]?s[10]="0":(s[10]="1",155!=s[7]&&await It.ZP.post("https://grille.azurewebsites.net/api/email-trigger?code=s6sPXo_8Osb45MfMQmZf4TkYwz7inhMYz55WesGG5kOfAzFusxsXtg==&clientId=default",{email:t.email,name:t.name,items:t.items,price:t.price}));const a=`UPDATE orders set done = ${s[10]} where id = ${s[0]}`;await It.ZP.post("https://duncan-grille-api.azurewebsites.net/api/place-order",{sql:a})},yl=async e=>{var t=[],s={};const a=await It.ZP.post("https://duncan-grille-api.azurewebsites.net/api/get-orders",{sql:"SELECT * from customers;"}),r=a.data;for(var i=0;i<r.length;i++)t.push(r[i]),s[r[i][0]]=r[i];e.commit("SET_CUSTOMERS",t),e.commit("SET_CUSTOMERS_IND",s)},fl=async e=>{const t="select c.Tot/w.Tot from (select sum(cost) as Tot from costs) C, (select count(*) as Tot from weeks) w",s="select r.Tot/w.Tot from (select sum(price) as Tot from orders) r, (select count(*) as Tot from weeks) w",a=await It.ZP.post("https://duncan-grille-api.azurewebsites.net/api/get-orders",{sql:t}),r=await It.ZP.post("https://duncan-grille-api.azurewebsites.net/api/get-orders",{sql:s}),i=a.data,l=r.data;e.commit("SET_PROJECTIONS",{r:Number(l[0]),c:Number(i[0])})},kl=async e=>{It.ZP.post("https://duncan-grille-api.azurewebsites.net/api/listener",{task:"placeorder"}),setTimeout((()=>{It.ZP.post("https://duncan-grille-api.azurewebsites.net/api/listener",{task:"reset"})}),31e3)},_l=async e=>{const t=async(e=3e4)=>new Promise((t=>setTimeout(t,e)));let s=0;while(1){await t();let a=await It.ZP.post("https://duncan-grille-api.azurewebsites.net/api/listener",{task:"listen"});1==a.data[0]?(s++,e.dispatch("getOrdersByDay")):s=0,s>2&&It.ZP.post("https://duncan-grille-api.azurewebsites.net/api/listener",{task:"reset"})}},Cl=async e=>{let t=`SELECT * FROM nightly_stats where day_of_week = "${e.state.currDay}" and week_id = ${e.state.currWeek}`;const s=await It.ZP.post("https://duncan-grille-api.azurewebsites.net/api/get-orders",{sql:t});t=`SELECT sum(price), count(*) FROM orders where order_day = "${e.state.currDay}" and week_id = ${e.state.currWeek} group by week_id`;const a=await It.ZP.post("https://duncan-grille-api.azurewebsites.net/api/get-orders",{sql:t});t=`SELECT sum(price) FROM orders where order_day = "${e.state.currDay}" and week_id = ${e.state.currWeek} and cash = 1 group by week_id`;const r=await It.ZP.post("https://duncan-grille-api.azurewebsites.net/api/get-orders",{sql:t});t=`SELECT count(*) FROM orders where order_day = "${e.state.currDay}" and week_id = ${e.state.currWeek} and online = 1 group by week_id`;const i=await It.ZP.post("https://duncan-grille-api.azurewebsites.net/api/get-orders",{sql:t});if(await s,await a,await r,await i,0==a.data.length&&0==s.data.length){let s=new Date;return s.setHours(s.getHours()-5),s=s.toISOString().slice(0,19).replace("T"," "),t=`insert into nightly_stats (week_id, day_of_week, date,  total_revenue, cash_revenue, venmo_revenue, online_fee, num_orders) values(${e.state.currWeek},"${e.state.currDay}", "${s}", 0, 0, 0, 0, 0)`,void await It.ZP.post("https://duncan-grille-api.azurewebsites.net/api/place-order",{sql:t})}if(0==a.data.length)return t=`update nightly_stats set total_revenue = 0, cash_revenue = 0, venmo_revenue = 0, online_fee = 0, num_orders = 0 where week_id = ${e.state.currWeek} and day_of_week = "${e.state.currDay}"`,void await It.ZP.post("https://duncan-grille-api.azurewebsites.net/api/place-order",{sql:t});let l=a.data[0][1],o=a.data[0][0],n=0;r.data.length>0&&(n=r.data[0][0]);let d=0;if(i.data.length>0&&(d=i.data[0][0]),0==s.data.length){let s=new Date;s.setHours(s.getHours()-5),s=s.toISOString().slice(0,19).replace("T"," "),t=`insert into nightly_stats (week_id, day_of_week, date,  total_revenue, cash_revenue, venmo_revenue, online_fee, num_orders) values(${e.state.currWeek},"${e.state.currDay}", "${s}", ${o}, ${n}, ${o-n}, ${d/2}, ${l})`,await It.ZP.post("https://duncan-grille-api.azurewebsites.net/api/place-order",{sql:t})}else t=`update nightly_stats set total_revenue = ${o}, cash_revenue = ${n}, venmo_revenue = ${o-n}, online_fee = ${d/2}, num_orders = ${l} where week_id = ${e.state.currWeek} and day_of_week = "${e.state.currDay}"`,await It.ZP.post("https://duncan-grille-api.azurewebsites.net/api/place-order",{sql:t})};var vl={login:sl,register:al,logout:rl,fetchUser:il,getRole:ll,getWeeksSQL:dl,selectWeek:cl,getCustomerBase:yl,updateFinancePage:ul,getOrdersByDay:hl,commitOrders:ml,deleteOrder:gl,completeOrder:bl,getEmployees:ol,logHours:nl,getOrderById:pl,updateOrder:wl,setProjections:fl,onlineTrigger:kl,listener:_l,setCustId:tl,updateDaily:Cl};const Sl=(e,t)=>{e.user=t},Ol=e=>{e.user=null},Dl=(e,t)=>{e.employeeRole=t.s,e.customer=t.n},El=(e,t)=>{e.employees=t},zl=(e,t)=>{e.weeks=t},Rl=(e,t)=>{e.selWeek=t},Tl=(e,t)=>{e.customerBase=t},Il=(e,t)=>{e.customerBaseInd=t},$l=(e,t)=>{e.custId=t},Nl=(e,t)=>{e.weekData=t},xl=(e,t)=>{e.weeklyVenmoRev=t},Ul=(e,t)=>{e.weeklyCashRev=t},Bl=(e,t)=>{e.weeklyRev=t},Wl=(e,t)=>{e.totalCost=t},Hl=(e,t)=>{e.orders=t.o,e.nightTotal=t.t,e.nightOnlineFee=t.of},Ml=(e,t)=>{e.editOrder=t},Pl=(e,t)=>{e.currWeek=t},Fl=(e,t)=>{e.selWeek=t},ql=(e,t)=>{e.currDay=t},Zl=(e,t)=>{e.weekLabels=t.l,e.weekVenmo=t.v,e.weekCash=t.c},Ll=(e,t)=>{e.weekCosts=t},Al=(e,t)=>{e.weeklyOnlineFee=t},jl=(e,t)=>{e.workerHours=t.wH,e.workingEmployees=t.w,e.totalHours=t.tH},Vl=(e,t)=>{e.wage=t},Kl=(e,t)=>{e.projections={r:t.r,c:t.c}},Gl=(e,t)=>{e.weeklyEmployees=t},Yl=(e,t)=>{e.hourLabels=t};var Ql={SET_LOGGED_IN:Sl,CLEAR_USER:Ol,SET_EMPLOYEE_ROLE:Dl,SET_WEEKS:zl,SELECT_WEEK:Rl,SET_CUSTOMERS:Tl,SET_WEEK_DATA:Nl,SET_VENMO_REV:xl,SET_CASH_REV:Ul,SET_TOTAL_REV:Bl,SET_COST:Wl,SET_ORDERS:Hl,SET_CURR_WEEK:Pl,SET_SEL_WEEK:Fl,SET_CURR_DAY:ql,SET_CUSTOMERS_IND:Il,SET_CHART_DATA:Zl,SET_EMPLOYEES:El,SET_EDIT_ORDER:Ml,SET_WEEK_COSTS:Ll,SET_WEEK_FEE:Al,SET_WORKER_HOURS:jl,SET_WAGE:Vl,SET_PROJECTIONS:Kl,SET_WORKING_E:Gl,SET_CUST_ID:$l,SET_HOUR_LABELS:Yl},Jl=(0,u.MT)({state:{user:null,weeks:null,sWeek:null,customerBase:[],customerBaseInd:{},employees:[],weeklyRev:0,weeklyCashRev:null,weeklyVenmoRev:null,weekData:{},totalCost:[],currDay:null,currWeek:null,selWeek:null,orders:[],nightTotal:null,nightOnlineFee:null,weekLabels:[],weekVenmo:[],weekCash:[],editOrder:[],weeklyOnlineFee:0,weekCosts:[],totalHours:10,workerHours:[],totalHours:0,wage:0,projections:{r:0,c:0},workingEmployees:[],weeklyEmployees:[],custId:0,hourLabels:[]},mutations:Ql,actions:vl});const Xl=[{path:"",redirect:{name:"home"}},{path:"/login",name:"login",component:rs,meta:{title:"Duncan Grille - Login"}},{path:"/register",name:"register",component:Fr,meta:{title:"Duncan Grille - Sign Up"}},{path:"/",name:"home",component:Tr,meta:{title:"Duncan Grille"}},{path:"/customer",name:"customer",component:hi,meta:{title:"Duncan Grille - Customer",requiresAuth:!0}},{path:"/finances",name:"finances",component:Kt,meta:{requiresAuth:!0,title:"Duncan Grille - Finances"}},{path:"/orders",name:"orders",component:wa,meta:{requiresAuth:!0,title:"Duncan Grille - Orders"}},{path:"/inventory",name:"inventory",component:_r,meta:{requiresAuth:!0,title:"Duncan Grille - Inventory"}},{path:"/past-orders",name:"past-orders",component:Xi,meta:{requiresAuth:!0,title:"Duncan Grille - Past Orders"}},{path:"/orders/edit/:id",name:"edit",component:Ha,meta:{requiresAuth:!0,title:"Duncan Grille - Edit Order"}},{path:"/:catchAll(.*)",redirect:"/login"}],eo=(0,De.p7)({history:(0,De.PO)("/"),routes:Xl});eo.beforeEach((async(e,t,s)=>{document.title=`${e.meta.title}`,"/login"==e.path&&ue.currentUser?s("/finances"):!e.matched.some((e=>e.meta.requiresAuth))||Jl.state.user?s():s("/login")}));var to=eo,so=s(947),ao=s(436),ro=s(810);s(734);so.vI.add(ao.mRB),(0,a.ri)(Oe).component("fa",ro.GN).use(to).use(Jl).mount("#app")}},t={};function s(a){var r=t[a];if(void 0!==r)return r.exports;var i=t[a]={exports:{}};return e[a].call(i.exports,i,i.exports,s),i.exports}s.m=e,function(){var e=[];s.O=function(t,a,r,i){if(!a){var l=1/0;for(c=0;c<e.length;c++){a=e[c][0],r=e[c][1],i=e[c][2];for(var o=!0,n=0;n<a.length;n++)(!1&i||l>=i)&&Object.keys(s.O).every((function(e){return s.O[e](a[n])}))?a.splice(n--,1):(o=!1,i<l&&(l=i));if(o){e.splice(c--,1);var d=r();void 0!==d&&(t=d)}}return t}i=i||0;for(var c=e.length;c>0&&e[c-1][2]>i;c--)e[c]=e[c-1];e[c]=[a,r,i]}}(),function(){s.d=function(e,t){for(var a in t)s.o(t,a)&&!s.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){s.p="/"}(),function(){var e={143:0};s.O.j=function(t){return 0===e[t]};var t=function(t,a){var r,i,l=a[0],o=a[1],n=a[2],d=0;if(l.some((function(t){return 0!==e[t]}))){for(r in o)s.o(o,r)&&(s.m[r]=o[r]);if(n)var c=n(s)}for(t&&t(a);d<l.length;d++)i=l[d],s.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return s.O(c)},a=self["webpackChunkgrillemasters"]=self["webpackChunkgrillemasters"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=s.O(void 0,[998],(function(){return s(388)}));a=s.O(a)})();
//# sourceMappingURL=app.80daa9e1.js.map